---
layout: post
section-type: post
title: HTTP-part1.HTTP 웹의 기초 - chap1. HTTP 개관
category: django
tags: [ 'django' ]
---

### 주요 내용

- 얼마나 많은 클라이언트와 서버가 통신하는지
- 리소스(웹 콘텐츠)가 어디서 오는지
- 웹 트랜잭션이 어떻게 동작하는지
- HTTP 통신을 위해 사용하는 메시지의 형식
- HTTP 기저의 TCP 네트워크 전송
- 여러 종류의 HTTP 프로토콜
- 인터넷 곳곳에 설치된 다양한 HTTP 구성요소

## 1.1 HTTP: 인터넷의 멀티미디어 배달부
JPEG, HTML, TEXT, MP4, WAV등 전세계의 다양한 콘텐츠들이 HTTP를 이용하여 빠르고 간편하게 통신되고 있다.  

HTTP는 정보의 **신뢰성** 을 보장 해주기 때문에, 개발자는 인터넷의 결함이나 약점에 대한 걱정없이 개발할 수 있다.

## 1.2 웹 클라이언트와 서버

뤱 콘텐츠는 웹서버에 존재한다.  
웹 서버는 HTTP 프로토콜로 통신하기 때문에 HTTP 서버라고 불린다.  
클라이언트(보통은 브라우저)는 서버에 HTTP 요청을 보내고, 서버는 HTTP응답을 보낸다.

## 1.3 리소스

웹 서버는 웹 리소스를 관리하고 제공한다.  
웹 리소스는 정적 파일(텍스트파일, HTML파일, JPEG파일, AVI파일 등)과 동적 파일(요청에 따라 콘텐츠를 생산하는 프로그램 등) 모두 포함된다.

### 1.3.1 미디어 타입

MIME(Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장)타입을 통해 리소스가 다룰 수 있는 객체인지 확인한다.  
MIME는 이메일에서 아주 잘 동작했기 때문에, HTTP에서도 멀티미디어 콘텐츠를 기술하고 라벨을 붙이기 위해 채택되었다.
웹 브라우저는 MIME로 객체를 구분하여 이미지 파일을 보여주고, HTML 파일을 분석하거나 포맷팅하고, 오디오 파일은 음악을 재생하고, 특별한 포맷은 외부 플러그인 소프트웨어를 실행한다.  

MIME 타입은 슬러시(`/`)으로 구분된 주타입(primary object type)과 부타입(specific subtype)으로 이루어진 문자열 라벨이다.

예를 들어

- HTML: text/html
- plain ASCII 텍스트문서: text/plain
- JPEG: image/jpeg
- ms ppt: application/vnd.ms-powerpoint

### 1.3.2 URI
서버 리소스의 이름 혹은 주소.  
통합 자원 식별자(uniform resource Identifer, URI).

URI는 URL과 URN 두 가지 종류가 있다.

### 1.3.3 URL
통합 자원 지시자(uniform resource locator, URL)  
특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.

URL은 세 부분으로 이루어진 표준 포맷이다.

https://kimdoky.github.io/img/post/book/http.jpg  

1. 스킴(scheme): 리소스에 접근하기 위해 사용되는 프로토콜을 서술. (http://)  
2. 서버의 인터넷 주소
3. 웹 서버의 리소스(경로)

요즘은 URI == URL 으로 사용한다.

### 1.3.4 URN
통합 자원 이름(uniform resource name, URN)  
콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향을 받지 않는 유일무이한 이름 역할을 한다.  
아직 실험중이고, 널리 채택되지 않았다. 효율적인 동작을 위해 URN은 리소스 위치를 분석하기 위한 인프라 지원이 필요한데, 아직 인프라가 구축되지 않아서 늦춰지고 있다.

## 1.4 트랜잭션
HTTP 트랜잭션은 요청 명령(클라이언트->서버)와 응답 결과(서버->클라이언트)로 구성되어 있다.
HTTP 메시지라는 정형화된 데이터 덩어리를 이용해 이루어 진다.

### 1.4.1 메서드
HTTP 요청 메시지는 한 개의 메서드를 갖는다.

HTTP 메서드 | 설명
---|---
GET | 서버에서 클라이언트로 지정한 리소스를 보내라.
PUT | 클라이어트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라.
DELETE | 지정한 리소스를 서버에서 삭제하라.
POST | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라.
HEAD | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라.

### 1.4.2 상태 코드
모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다.

HTTP 상태 코드 | 설명
---|---
200 | 좋음. 문서가 바르게 반환되었다.
302 | 다시 보내라. 다른 곳에 가서 리소스를 가져가라.
400 | 없음. 리소스를 찾을 수 없다.

### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다
웹 브라우저는 다양한 시각적 요소를 가진 웹페이지를 가져올 때 대량의 HTTP 트랜잭션을 수행한다. 레이아웃을 서술하는 HTML를 한번 트랜잭션으로 가져온 뒤, 다양한 리소스(text, image, video 등)들을 가져오기 위해 추가로 대량의 HTTP 트랜잭션을 수행한다. 웹페이지는 보통 하나의 리소스가 아닌 리소스 모임이다.

## 1.5 메시지
HTTP 메시지는 단순한 줄 단위의 문자열이다. 이진 방식이 아닌 텍스트이기 때문에 사람이 읽고 쓰기 쉽다. 그래서 확장과 디버깅에 용이하다.  

![]({{ site.url }}/img/post/http/1.5.png)

#### 시작줄
메시지의 첫 줄은 시작줄로, 요청이라면 무엇을 해야 하는지, 응답이라면 무슨 일이 일어났는지 나타낸다.

#### 헤더
시작줄 다음에는 0개 이상의 헤더 필드가 이어진다. 각 헤더 필드는 쉬운 구분분석을 위해 클론(`:`)으로 구분되어 있는 하나의 이름과 하나의 값으로 구성된다. 헤더 필드를 추가하려면 한 줄더 추가하기만 하면 된다. 빈 줄로 끝난다.

#### 본문
빈 줄 다음에는 어떤 종류의 데이터든 들어갈 수 있는 메시지 본분이 필요에 따라 올 수 있다. 요청의 본문은 웹 서버로 데이터를 실어 보내며, 응답의 본문은 클라이언트로 데이터를 반환한다. 문자열이며, 이진 데이터를 포함할 수 있다.(텍스트뿐만 아니라, 이미지, 오디오, 비디오, 응용 소프트웨어 등)


## 1.6 TCP 커넥션
메시지가 어떻게 TCP(Transmission Control Protocol, 전송 제어 프로토콜) 커넥션을 통해 다른 곳으로 옮겨가는지 다룬다.

### 1.6.1 TCP/IP
TCP는 다음을 제공한다.

- 오류 없는 데이터 전송
- 순서에 맞는 전달 (데이터는 언제나 보낸 순서대로 도착한다.)
- 조각나지 않는 데이터 스트림 (언제든 어떤 크기로든 보낼 수 있다.)

TCP/IP는 패킷 교환 네트워크 프로토콜의 집합이다. TCP/IP는 각 네트워크와 하드웨어의 특성을 숨기고, 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 통신을 하게 해준다. 일단 TCP 커넥션이 맺어지면, 교환되는 메시지의 손상이나 분실등을 보장해준다.  
네트워크 개념상 HTTP는 TCP 위의 계층이라서 HTTP는 데이터를 전송하기 위해 TCP를 사용해서 데이터의 신뢰성을 보장한다.

![]({{ site.url }}/img/post/http/1.6.png)


### 1.6.2 접속, IP 주소 그리고 포트번호
HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에, 인터넷 프로토콜(Internet Protocol, IP) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 한다.

## 1.7 프로토콜 버전

#### HTTP/0.9
프로토타입으로 GET 메서드만 지원했다.

#### HTTP/1.0
HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리가 추가되었다.

#### HTTP/1.0+
오래 지속되는 "keep-alive" 커넥션, 가상 호스트 지원, 프락시 연결 지원을 포함한 많은 기능이 비공식적으로 추가되었다.

#### HTTP/1.1
HTTP 설계의 구조적 결함 교정, 성능 최적화, 잘못된 기능이 제거되었다. 현재 사용되는 버전이다.

#### HTTP/2.0
1.1 버전의 성능 문제를 개선하기 위해 구글의 SPDY 프로토콜 기반으로 설계가 진행중인 프로토콜

## 1.8 웹의 구성요소

#### 프락시
클라이언트와 서버 사이에 위치한 HTTP 중계자
#### 캐시
많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
#### 게이트웨이
다른 애플리케이션과 연결된 특별한 웹 서버
#### 터널
단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
#### 에이전트
자동화된 HTTP 요청을 만드는 준지능적 웹 클라이언트

### 1.8.1 프락시
프락시는 클라이언트와 서버 사이에 위치하여, 클라이언트의 모든 HTTP 요청을 받아 서버에 전달한다.  
주로 보안을 위해 사용된다. 무엇인가 다운받을 때 바이러스를 검출하거나, 미성년자에게서 성인콘텐츠를 차단한다. 즉, 신뢰할 만한 중개자 역할을 한다.

![]({{ site.url }}/img/post/http/1.8.1.png)

### 1.8.2 캐시
자주 사용되는 문서를 캐시 서버에 저장해서 빠른 동작을 하게 한다. HTTP는 캐시를 효율적으로 동작하게 하고, 캐시된 콘텐츠를 최신 버전으로 유지하면서, 동시에 프라이버시도 보호하기 위한 많은 기능을 정의한다.

### 1.8.3 게이트웨이
주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용된다.
![]({{ site.url }}/img/post/http/1.8.3.png)
HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아들인 뒤, FTP 프로토콜을 이용해 문서를 가져온다. 받아온 문서는 HTTP 메시지에 담겨 클라이언트에게 보낸다.

### 1.8.4 터널
두 커넥션 사이에서 raw 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션이다. 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송하기 위해 사용된다. (예 : 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송함으로 웹 트래픽만 허용하는 사내 방화벽을 통과시키는 것)

### 1.8.5 에이전트
검색엔진 로봇, 크롤러 등을 말한다.
