I"´"<h1 id="django-rest-framework---format-suffixes">Django REST Framework - Format suffixes</h1>

<hr />

<p><em>â€œSection 6.2.1 does not say that content negotiation should be used all the time.â€</em></p>

<p><em>â€œì„¹ì…˜ 6.2.1ì€ content negotiationì´ í•­ìƒ ì‚¬ìš©ë˜ì–´ì•¼í•œë‹¤ê³  ë§í•˜ì§€ ì•ŠëŠ”ë‹¤. â€œ</em></p>

<p><em>â€” Roy Fielding, REST discuss mailing list</em></p>

<hr />

<h2 id="format-suffixes">Format suffixes</h2>
<p>ì›¹ APIì˜ ì¼ë°˜ì ì¸ íŒ¨í„´ì€ URLì—ì„œ íŒŒì¼ ì´ë¦„ í™•ì¥ìë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë¯¸ë””ì–´ ìœ í˜•ì— ëŒ€í•œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, â€˜http://example.com/api/users.jsonâ€™ì€ JSON í‘œí˜„ì„ ì œê³µí•©ë‹ˆë‹¤.<br />
APIì˜ URLconfì— ìˆëŠ” ê° ê°œë³„ í•­ëª©ì— í˜•ì‹ ì ‘ë¯¸ì‚¬ íŒ¨í„´ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ì‰½ê³  DRYê°€ ì•„ë‹ˆë¯€ë¡œ REST í”„ë ˆì„ì›Œí¬ëŠ” ì´ëŸ¬í•œ íŒ¨í„´ì„ URLconfì— ì¶”ê°€í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.</p>

<h3 id="format_suffix_patterns">format_suffix_patterns</h3>
<p><strong>Signature</strong>: format_suffix_patterns(urlpatterns, suffix_required=False, allowed=None)</p>

<p>ì œê³µëœ ê° URL íŒ¨í„´ì— ì¶”ê°€ ëœ í˜•ì‹ ì ‘ë¯¸ì‚¬ íŒ¨í„´ì„ í¬í•¨í•˜ëŠ” URL íŒ¨í„´ listë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>

<p>Arguments:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">urlpatterns</code> : <strong>í•„ìˆ˜</strong>. URL íŒ¨í„´ ëª©ë¡.</li>
  <li><code class="language-plaintext highlighter-rouge">suffix_required</code> : ì„ íƒì‚¬í•­. URLì˜ ì ‘ë¯¸ì‚¬ë¥¼ ì˜µì…˜ìœ¼ë¡œ í•˜ëŠ”ì§€, í•„ìˆ˜ë¡œ í•˜ëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” booleanì…ë‹ˆë‹¤. ë””í´íŠ¸ëŠ” <code class="language-plaintext highlighter-rouge">False</code>ì…ë‹ˆë‹¤. ì ‘ë¯¸ì‚¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì„ íƒì‚¬í•­ì…ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">allowed</code> : ì„ íƒì‚¬í•­. ìœ íš¨í•œ í˜•ì‹ ì ‘ë¯¸ì‚¬ì˜ list ë˜ëŠ” tupleì…ë‹ˆë‹¤. ì œê³µë˜ì§€ ì•Šìœ¼ë©´ ì™€ì¼ë“œ ì¹´ë“œ í˜•ì‹ ì ‘ë¯¸ì‚¬ íŒ¨í„´ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
</ul>

<p>ì˜ˆ:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">rest_framework.urlpatterns</span> <span class="kn">import</span> <span class="n">format_suffix_patterns</span>
<span class="kn">from</span> <span class="nn">blog</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s">'^/$'</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">apt_root</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s">'^comments/$'</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">comment_list</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s">'^comments/(?P&lt;pk&gt;[0-9]+)/$'</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">comment_detail</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">format_suffix_patterns</span><span class="p">(</span><span class="n">urlpatterns</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s">'json'</span><span class="p">,</span> <span class="s">'html'</span><span class="p">])</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">format_suffix_patterns</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° <code class="language-plaintext highlighter-rouge">'format'</code>í‚¤ì›Œë“œ ì¸ìˆ˜ë¥¼ í•´ë‹¹ ë¶€ì— ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤. ì˜ˆ:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_view</span><span class="p">((</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">comment_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># do stuff...
</span></code></pre></div></div>
<p>ë˜ëŠ” class-bassed-views:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CommentList</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># do stuff...
</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c1"># do stuff...
</span></code></pre></div></div>
<p>ì‚¬ìš© ëœ kwargì˜ ì´ë¦„ì€ <code class="language-plaintext highlighter-rouge">FORMAT_SUFFIX_KWARG</code>ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
ë˜í•œ <code class="language-plaintext highlighter-rouge">format_suffix_patterns</code>ëŠ” <code class="language-plaintext highlighter-rouge">include</code>URL íŒ¨í„´ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<h4 id="using-with-i18n_patterns">Using with <code class="language-plaintext highlighter-rouge">i18n_patterns</code></h4>
<p>Djangoì—ì„œ ì œê³µí•˜ëŠ” <code class="language-plaintext highlighter-rouge">i18n_patterns</code>í•¨ìˆ˜ì™€ <code class="language-plaintext highlighter-rouge">format_suffix_patterns</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° <code class="language-plaintext highlighter-rouge">i18n_patterns</code> í•¨ìˆ˜ê°€ ìµœì¢… í•¨ìˆ˜ ë˜ëŠ” ê°€ì¥ ë°”ê¹¥ìª½ í•¨ìˆ˜ë¡œ ì ìš©ë˜ëŠ”ì§€ í™•ì¸í•´ì•¼í•©ë‹ˆë‹¤. ì˜ˆ:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span> <span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="err">â€¦</span>
<span class="p">]</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">i18n_patterns</span><span class="p">(</span>
    <span class="n">format_suffix_patterns</span><span class="p">(</span><span class="n">urlpatterns</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s">'json'</span><span class="p">,</span> <span class="s">'html'</span><span class="p">])</span>
<span class="p">)</span>
</code></pre></div></div>

<hr />

<h3 id="query-parameter-formats">Query parameter formats</h3>
<p>format suffixeì˜ ëŒ€ì‹  ìš”ì²­ ëœ ì¿¼ë¦¬ parameterì— í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. REST í”„ë ˆì„ì›Œí¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì˜µì…˜ì„ ì œê³µí•˜ë©°, browsable APIì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ë‹¤ì–‘í•œ í‘œí˜„ì„ ì „í™˜í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.<br />
ì§§ì€ í˜•ì‹ì„ ì‚¬ìš©í•˜ì—¬ í‘œí˜„ì„ ì„ íƒí•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">format</code> ì¿¼ë¦¬ parameterë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤. ì˜ˆ : <code class="language-plaintext highlighter-rouge">http://example.com/organizations/?format=csv</code><br />
ì´ ì¿¼ë¦¬ parameterì˜ ì´ë¦„ì€ <code class="language-plaintext highlighter-rouge">URL_FORMAT_OVERRIDE</code>ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë™ì‘ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë ¤ë©´ ê°’ì„ <code class="language-plaintext highlighter-rouge">None</code>ìœ¼ë¡œ ì„¤ì •í•˜ì„¸ìš”.</p>

<h3 id="accept-headers-vs-format-suffixes">Accept headers vs. format suffixes</h3>
<p>íŒŒì¼ ì´ë¦„ í™•ì¥ìëŠ” RESTfull íŒ¨í„´ì´ ì•„ë‹ˆë©´ HTTP Accept í—¤ë”ê°€ í•­ìƒ ëŒ€ì‹  ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤ëŠ” ì›¹ ì»¤ë®¤ë‹ˆí‹°ì˜ ê²¬í•´ê°€ ìˆëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.<br />
ê·¸ê²ƒì€ ì‹¤ì œë¡  ì˜¤í•´ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Roy Filedingì€ ì¿¼ë¦¬ parameter ë¯¸ë””ì–´ íƒ€ì… í‘œì‹œê¸°ì™€ íŒŒì¼ í™•ì¥ ë¯¸ë””ì–´ íƒ€ì… í‘œì‹œê¸°ì˜ ìƒëŒ€ì  ì¥ì ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•©ë‹ˆë‹¤.<br />
<em>â€œê·¸ë˜ì„œ ë‚˜ëŠ” í•­ìƒ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ì„ í˜¸í•©ë‹ˆë‹¤. ì–´ëŠ ì„ íƒë„ RESTì™€ëŠ” ì•„ë¬´ëŸ° ê´€ë ¨ì´ ì—†ìŠµë‹ˆë‹¤. â€œ- Roy Fielding, REST í† ë¡  ë©”ì¼ ë§ë¦¬ìŠ¤íŠ¸</em></p>

<p>ì¸ìš©ë¬¸ì—ëŠ” Accept Headersê°€ ì–¸ê¸‰ë˜ì–´ ìˆì§€ ì•Šì§€ë§Œ format suffixëŠ” í—ˆìš©ë˜ëŠ” íŒ¨í„´ìœ¼ë¡œ ê°„ì£¼ë˜ì–´ì•¼ í•œë‹¤ëŠ” ì ì„ ë¶„ëª…íˆ í•©ë‹ˆë‹¤.</p>
:ET