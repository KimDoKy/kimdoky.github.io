I"Œ}<h1 id="user-authentication-with-a-google-account-using-django-allauth"><a href="http://www.marinamele.com/user-authentication-with-google-using-django-allauth">User Authentication with a Google Account using Django Allauth</a></h1>

<p>ì´ë²ˆ íŠœí† ë¦¬ì–¼ì€ â€˜django-allauthâ€™ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ íŒ¨í‚¤ì§€ëŠ” Facebook, Twitter, Google ë“±ì˜ ì†Œì…œ ê³„ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.</p>

<p>ì‚¬ìš©ìê°€ í™ˆí˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ë©´ ì‚¬ìš© ê°€ëŠ¥í•œ ì‡¼ì…œ ê³„ì • ì„œë¹„ìŠ¤ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸(í˜¹ì€ ë“±ë¡) í•  ìˆ˜ ìˆëŠ” ì•„ì´ë””ì–´ê°€ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì‚¬ìš©ìê°€ ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ ë“±ë¡ ë  ë•Œë§ˆë‹¤ ìƒˆ ì‚¬ìš©ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<p>ì´ë²ˆ íŒŒíŠ¸ì—ì„œëŠ” Google ì¸ì¦ì— ì¤‘ì ì„ ë‘ê³ , ì–¸ì €ë‚˜ì²˜ëŸ¼ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>

<p>ì´ íŒŒíŠ¸ì˜ ê°œìš”ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<ul>
  <li>Define what we expect and write a Test</li>
  <li>Install django-allauth</li>
  <li>Settings File</li>
  <li>Urls</li>
  <li>Database migrations</li>
  <li>Sites configuration</li>
  <li>Google App registration</li>
  <li>Allauth Django configuration</li>
  <li>Testing the user flow</li>
</ul>

<h2 id="define-what-we-expect-and-write-a-test">Define what we expect and write a Test</h2>

<p>HTML5 Boilerplateì™€ í•¨ê»˜ ì œê³µë˜ëŠ” base.html í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— TaskBuster í™ˆí˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ Sign In í˜•ì‹ì˜ ìƒë‹¨ ë°”ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>

<p><img src="/img/post/django/TB/allauth_bar.png" alt="" /></p>

<p>ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” â€˜Sign in with Googleâ€™ì´ë¼ëŠ” ë²„íŠ¼ê³¼ ë‹¤ë¥¸ ì‚¬ìš©ìì— ëŒ€í•œ â€˜Logoutâ€™ë²„íŠ¼ë§Œ í¬í•¨ë˜ë„ë¡ ìˆ˜ì •í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p>

<p>â€˜functional_tests/test_allauth.pyâ€™ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding: utf-8 -*-
</span><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>
<span class="kn">from</span> <span class="nn">selenium.common.exceptions</span> <span class="kn">import</span> <span class="n">TimeoutException</span>

<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.contrib.staticfiles.testing</span> <span class="kn">import</span> <span class="n">StaticLiveServerTestCase</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">activate</span>


<span class="k">class</span> <span class="nc">TestGoogleLogin</span><span class="p">(</span><span class="n">StaticLiveServerTestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Firefox</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">browser</span><span class="p">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">browser</span><span class="p">.</span><span class="n">wait</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">browser</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">activate</span><span class="p">(</span><span class="s">'en'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">browser</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_element_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">browser</span><span class="p">.</span><span class="n">wait</span><span class="p">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="p">.</span><span class="n">presence_of_element_located</span><span class="p">(</span>
                <span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">element_id</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">get_button_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">browser</span><span class="p">.</span><span class="n">wait</span><span class="p">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="p">.</span><span class="n">element_to_be_clickable</span><span class="p">(</span>
                <span class="p">(</span><span class="n">By</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">element_id</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">get_full_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespace</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">live_server_url</span> <span class="o">+</span> <span class="n">reverse</span><span class="p">(</span><span class="n">namespace</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_google_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">browser</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">get_full_url</span><span class="p">(</span><span class="s">"home"</span><span class="p">))</span>
        <span class="n">google_login</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="s">"google_login"</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="p">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TimeoutException</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="s">"logout"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">google_login</span><span class="p">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s">"href"</span><span class="p">),</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">live_server_url</span> <span class="o">+</span> <span class="s">"/accounts/google/login"</span><span class="p">)</span>
        <span class="n">google_login</span><span class="p">.</span><span class="n">click</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="p">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">TimeoutException</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="s">"google_login"</span><span class="p">)</span>
        <span class="n">google_logout</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="s">"logout"</span><span class="p">)</span>
        <span class="n">google_logout</span><span class="p">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">google_login</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="s">"google_login"</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">setUp</code>ì—ì„œ ë¸Œë¼ìš°ì €ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">WebDriverWait</code>ëŠ” ìš”ì†Œê°€ ë°œê²¬ë˜ì§€ ì•Šì„ ë•Œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê¸° ì „ì— ë¸Œë¼ìš°ì €ê°€ ì¼ì • ì‹œê°„ ëŒ€ê¸°í•˜ë„ë¡ í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">tearDown</code>ì€ ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">get_element_by_id</code>ì™€ <code class="language-plaintext highlighter-rouge">get_button_by_id</code>ëŠ” <code class="language-plaintext highlighter-rouge">WebDriverWait</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ IDë¡œ ìš”ì†Œë¥¼ ì°¾ëŠ” í—¬í”„ í•¨ìˆ˜ì…ë‹ˆë‹¤. ë²„íŠ¼ì˜ ê²½ìš° ìš”ì†Œë¥¼ í´ë¦­ í•  ìˆ˜ ìˆì„ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">get_full_url</code>ì€ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•œ ë‹¤ë¥¸ í—¬í”„ í•¨ìˆ˜ì…ë‹ˆë‹¤. ì—­ë°©í–¥ ì´ë¦„ì„ ê°€ì§„ ì „ì²´ URLì„ ë°˜í™˜í•©ë‹ˆë‹¤.</li>
  <li>ì—¬ê¸°ì—ì„œ <code class="language-plaintext highlighter-rouge">test_google_login</code>ì´ ì£¼ìš” í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ê·¸ê±´ í™ˆí˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>
  <li>ë¡œê·¸ì¸ ë²„íŠ¼ì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li>ë¡œê·¸ ì•„ì›ƒ ë²„íŠ¼ì´ ì—†ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li>ë¡œê·¸ì¸ ë²„íŠ¼ì´ ì˜¬ë°”ë¥¸ URL(/accounts/google/login)ì„ ê°€ë¦¬í‚¤ê³  ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li>ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ê³  ëŒ€ì‹  ë¡œê·¸ ì•„ì›ƒ ë²„íŠ¼ì´ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li>ë¡œê·¸ ì•„ì›ƒ ë²„íŠ¼ì„ í´ë½í•˜ë©´ ì‚¬ìš©ìê°€ ë‹¤ì‹œ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ë³´ê²Œ ë©ë‹ˆë‹¤.</li>
</ul>

<p>ì´ì œ ë¬´ì—‡ì„ ì›í•˜ëŠ”ì§€ ì•Œì•˜ìœ¼ë‹ˆ, â€˜allauthâ€™ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”.</p>

<h2 id="install-django-allauth">Install django-allauth</h2>

<p><code class="language-plaintext highlighter-rouge">django-allauth</code> íŒŒí‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë©´ ì‚¬ìš©ìê°€ Googleì´ë‚˜ Twitterê³¼ ê°™ì€ ë‹¤ë¥¸ ì†Œì…œ ê³„ì •ì„ ì‚¬ìš©í•˜ì—¬ ë“±ë¡í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pip install django-allauth
</code></pre></div></div>

<p>ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Successfully installed django-allauth python3-openid requests-oauthlib requests defusedxml oauthlib
Cleaning up...
</code></pre></div></div>

<p>ì´ë“¤ ëª¨ë‘ â€˜requirements/base.txtâ€™ íŒŒì¼ì— ì¶”ê°€í•˜ê³  í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<h2 id="settings-file">Settings File</h2>

<p>ê·¸ëŸ° ë‹¤ìŒ, â€˜settings/base.pyâ€™ íŒŒì¼ì„ ì—´ê³  <code class="language-plaintext highlighter-rouge">django.template.context_procesors.request</code>ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">TEMPLATES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'BACKEND'</span><span class="p">:</span> <span class="s">'django.template.backends.django.DjangoTemplates'</span><span class="p">,</span>
        <span class="s">'DIRS'</span><span class="p">:</span> <span class="p">[</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">"templates"</span><span class="p">)],</span>
        <span class="s">'APP_DIRS'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
        <span class="s">'OPTIONS'</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">'context_processors'</span><span class="p">:</span> <span class="p">[</span>
                <span class="s">'django.template.context_processors.debug'</span><span class="p">,</span>
                <span class="s">'django.template.context_processors.request'</span><span class="p">,</span>
                <span class="s">'django.contrib.auth.context_processors.auth'</span><span class="p">,</span>
                <span class="s">'django.contrib.messages.context_processors.messages'</span><span class="p">,</span>
                <span class="s">'django.template.context_processors.i18n'</span><span class="p">,</span>
                <span class="c1"># Required by allauth template tags
</span>                <span class="c1"># 'django.core.context_processors.request",
</span>                <span class="c1"># django 2.1 ver 'django.template.context_processors',
</span>            <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span>
</code></pre></div></div>

<p>ë‹¤ìŒìœ¼ë¡œ allauthì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¸ì¦ ë°±ì—”ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># Default backend -- used to login by username in Django admin
</span>    <span class="s">"django.contrib.auth.backends.ModelBackend"</span><span class="p">,</span>
    <span class="c1"># `allauth` specific authentication methods, such as login by e-mail
</span>    <span class="s">"allauth.account.auth_backends.AuthenticationBackend"</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>ì•±ì„ ì¶”ê°€í•©ë‹ˆë‹¤.(Googleìš© ì•± í¬í•¨)</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">INSTALLED_APPS</span> <span class="o">+=</span> <span class="p">(</span>
    <span class="c1"># The Django sites framework is required
</span>    <span class="s">'django.contrib.sites'</span><span class="p">,</span>
    <span class="s">'allauth'</span><span class="p">,</span>
    <span class="s">'allauth.account'</span><span class="p">,</span>
    <span class="s">'allauth.socialaccount'</span><span class="p">,</span>
    <span class="c1"># Login via Google
</span>    <span class="s">'allauth.socialaccount.providers.google'</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">SITE_ID</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<p>â€™+ =â€™ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ì¡´ ì„¤ì¹˜ëœ <code class="language-plaintext highlighter-rouge">INSTALLED_APPS</code> ì„¤ì •ì— ì„µì¹˜ëœ Appsë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">SITE_ID</code> ë§¤ê°œ ë³€ìˆ˜ëŠ” Django ì‚¬ì´íŠ¸ í”„ë ˆì„ì›Œí¬ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ë‹¤ìŒ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì—¬ ê¶Œí•œ ë¶€ì—¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì»¤ìŠ¤í…€í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ACCOUNT_USERNAME_REQUIRED = False
ACCOUNT_EMAIL_VERIFICATION = "none"
SOCIALACCOUNT_QUERY_EMAIL = True
LOGIN_REDIRECT_URL = "/"
</code></pre></div></div>

<p>ì´ë ‡ê²Œ í•˜ë©´ allauthê°€ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì´ë©”ì¼ì„ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê°€ëŠ¥í•œ ê²½ìš°). í™•ì¸ í”„ë¡œì„¸ìŠ¤ ì—†ì´ Googleì— ìš”ì²­í•  ê²ƒì´ë©°, ë¡œê·¸ì¸ í•œ í›„ ì‚¬ìš©ìì—ê²Œ í™ˆí˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜í•©ë‹ˆë‹¤.</p>

<p><a href="https://django-allauth.readthedocs.io/en/latest/configuration.html">ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì •</a>ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.</p>

<h2 id="urls">Urls</h2>

<p>â€˜taskbuster/urls.pyâ€™ íŒŒì¼ì„ ì—´ê³  i18n internationalization urls ì•ì— í•´ë‹¹í•˜ëŠ” URLì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>urlpatterns = [
    url(r'^(?P&lt;filename&gt;(robots.txt)|(humans.txt))$',
        home_files, name='home-files'),
    url(r'^accounts/', include('allauth.urls')),
]

urlpatterns += i18n_patterns(
   ...
)
</code></pre></div></div>

<h2 id="database-migrations">Database migrations</h2>

<p>ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py check
$ python manage.py migrate
</code></pre></div></div>

<h2 id="sites-configuration">Sites configuration</h2>

<p>ì´ì œ ì‚¬ì´íŠ¸ í”„ë ˆì„ì›Œí¬ë¥¼ êµ¬ì„±í•´ì•¼í•©ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ ê°œë°œ ì„œë²„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py runserver
</code></pre></div></div>

<p>ê´€ë¦¬ì ì¸í„°í˜ì´(http://127.0.0.1:8000/en/admin/sites/site/)ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ localhost, 127.0.0.1:8000, í”„ë¡œë•ì…˜ì„ ìœ„í•œ ë„ë©”ì¸ì„ ê°€ì§„ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤. example.comìœ¼ë¡œ ì‚¬ì´íŠ¸ë¥¼ ì •ì˜í•œ ê²½ìš° ì„¤ì •ì˜ <code class="language-plaintext highlighter-rouge">SITE_ID=1</code> ë³€ìˆ˜ì™€ ë™ì¼í•œ IDë¥¼ ê°€ì§€ë„ë¡ ìˆ˜ì •í•˜ì„¸ìš”. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìƒˆ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“œëŠ” ê²½ìš° ë°©ê¸ˆ ë§Œë“  ì‚¬ì´íŠ¸ì˜ ID(ì•„ë§ˆë„ 2)ë¡œ ì„¤ì • ë³€ìˆ˜<code class="language-plaintext highlighter-rouge">SITE_ID</code>ë¥¼ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>Google ì•±ì„ ë§Œë“  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<h2 id="google-app-registration">Google App registration</h2>

<p>ë¨¼ì € Googlr Appì„ ë§Œë“¤ì–´ í‚¤/ë¹„ë°€ ìŒì„ íšë“í•©ë‹ˆë‹¤. <a href="https://console.developers.google.com/project">Google Developers Console</a>ìœ¼ë¡œ ì´ë™í•˜ì—¬ Create Projectë¥¼ í´ë¦­í•˜ê³  í”„ë¡œì íŠ¸ ì´ë¦„ê³¼ IDë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>

<p>ê·¸ëŸ° ë‹¤ìŒ ìƒˆë¡œ ìƒì„± ëœ í”„ë¡œì íŠ¸ë¥¼ í´ë¦­í•˜ê³  ì™¼ìª½ ë©”ë‰´ì—ì„œ APIs &amp; auth â€“&gt; Credentialsë¥¼ ì„ íƒí•˜ê³  Consent screen íƒ­ì„ í´ë¦­í•˜ì„¸ìš”. ì ì–´ë„ ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>Credentials íƒ­ìœ¼ë¡œ ì´ë™í•˜ì—¬ Create new Client IDë¥¼ í´ë¦­í•˜ì„¸ìš”. Web Applicationë¥¼ ì„ íƒí•˜ê³  ì‚¬ìš©í•˜ì„¸ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Authorized Javascript Origins: http://127.0.0.1:8000/

Authorized Redirect Uris: http://127.0.0.1:8000/accounts/google/login/callback/
</code></pre></div></div>

<p>ìë™ìœ¼ë¡œ ì œì•ˆëœ ë¦¬ë‹¤ì´ë ‰ì…˜ URIëŠ” ì—¬ê¸°ì— ì“°ì—¬ì§„ ê²ƒê³¼ ë‹¤ë¦…ë‹ˆë‹¤.</p>

<p>ì´ ì•±ì€ ìš°ë¦¬ì˜ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì‘ë™í•©ë‹ˆë‹¤. prod ìš©ìœ¼ë¡œ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸/ë³´ì•ˆ ìŒì„ ë§Œë“¤ì–´ì•¼ í•˜ë©° ì›¹ ì‚¬ì´íŠ¸ ë„ë©”ì¸ì— ë”°ë¼ http://127.0.0.1:8000/ ì„ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>Google ì•±ì„ ì¤€ë¹„í–ˆìœ¼ë¯€ë¡œ Django ë¶€ë¶„ì„ êµ¬ì„±í•´ë´…ì‹œë‹¤.</p>

<h2 id="allauth-django-configuration">Allauth Django configuration</h2>

<p>http://127.0.0.1:8000/admin/socialaccount/socialapp ì—ì„œ Googleì˜ ì†Œì…œ ì•±ì„ ë§Œë“¤ê³  ë‹¤ìŒ ì†ì„±ì„ ì‚¬ìš©í•˜ì„¸ìš”.</p>

<ul>
  <li>Provider: Google</li>
  <li>Name: Google (í˜¹ì€ ë¹„ìŠ·í•œ ì´ë¦„)</li>
  <li>Client ID: your application Client ID (Developers Consoleì˜ APIs &amp; auth â€“&gt; Credentialsì—ì„œ ê°€ì ¸ì˜¤ì„¸ìš”).</li>
  <li>Secret Key: your application Client Secret</li>
  <li>Key: í•„ìš” ì—†ìŒ(ë¹„ì›Œë‘ )</li>
  <li>í•´ë‹¹ ì‚¬ì´íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”.</li>
</ul>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•˜ì„¸ìš”.</p>

<h2 id="testing-the-user-flow">Testing the user flow</h2>

<p>ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test functional_tests.test_all_users.TestGoogleLogin
</code></pre></div></div>

<p>ì²« ë²ˆì§¸ë¡œ í™ˆí˜ì´ì§€ì— idê°€ google_loginì¸ ìš”ì†Œê°€ ì—†ì–´ì„œ ì‹¤íŒ¨í•©ë‹ˆë‹¤.</p>

<p>â€˜taskbuster/templates/base.htmlâ€™ íŒŒì¼ì„ í¸ì§‘í•˜ê³  navigation barë¥¼ ì°¾ìœ¼ì„¸ìš”. í¼ íƒœê·¸ë¥¼ ë‹¤ìŒ ì½”ë“œë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-collapse collapse"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-form navbar-right"</span><span class="nt">&gt;</span>
    {% if user.is_authenticated %}
      <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"logout"</span> <span class="na">href=</span><span class="s">"/accounts/logout"</span> <span class="na">class=</span><span class="s">"btn btn-success"</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/a&gt;</span>
    {% else %}
      <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"google_login"</span> <span class="na">href=</span><span class="s">"/accounts/google/login"</span> <span class="na">class=</span><span class="s">"btn btn-success"</span><span class="nt">&gt;</span>
        Sign in with Google
      <span class="nt">&lt;/a&gt;</span>
    {% endif %}
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span><span class="c">&lt;!--/.navbar-collapse --&gt;</span>
</code></pre></div></div>

<p>ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš°ì—ë§Œ ë¡œê·¸ì¸ ë²„íŠ¼ì„ í‘œì‹œí•˜ê³  ë‹¤ë¥¸ ê²½ìš°ì—ëŠ” ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í‘œì‹œí•˜ê¸° ìœ„í•´ ëª‡ ê°€ì§€ ë¡œì§ì„ í¬í•¨ì‹œì¼°ìŠµë‹ˆë‹¤.</p>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­í•œ í›„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‚˜ë””. ì´ëŠ” í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ì— Google ì•±ì´ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.(í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.)</p>

<p>ê°œë°œ ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” ì‚¬ì´íŠ¸, Google ì•±, ê´€ë¦¬ìë§Œ ìˆìœ¼ë¯€ë¡œ ë°ì´í„°ë¥¼ ë¤í”„í•˜ì—¬ fixtureë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<p>ë¨¼ì €, fixtures í´ë”ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir taskbuster/fixtures
</code></pre></div></div>

<p>ë‹¤ìŒì€, fixtureë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py dumpdata --indent 2 --natural-foreign -e contenttypes -e auth.Permission &gt; taskbuster/fixtures/allauth_fixture.json
</code></pre></div></div>

<p>fixturesì—ëŠ” ì¤‘ìš”í•œ ì •ë³´ê°€ ìˆìœ¼ë¯€ë¡œ â€˜.gitignoreâ€™ íŒŒì¼ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<p>ë‹¤ìŒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ì—ì„œ fixtureë¥¼ ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤. â€˜settings/test.pyâ€™ì— fixture ê²½ë¡œë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">FIXTURE_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">'fixtures'</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>ê·¸ë¦¬ê³  test í´ë˜ìŠ¤ì˜ ì‹œì‘ ë¶€ë¶„ì— ë‹¤ìŒê³¼ ê°™ì€ fixtureë¥¼ í¬í•¨ì‹œí‚µë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TestGoogleLogin</span><span class="p">(</span><span class="n">StaticLiveServerTestCase</span><span class="p">):</span>

    <span class="n">fixtures</span> <span class="o">=</span> <span class="p">[</span><span class="s">'allauth_fixture'</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">...</span>
</code></pre></div></div>

<p>ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test functional_tests.test_all_users.TestGoogleLogin
</code></pre></div></div>

<p>ì´ë²ˆì—ëŠ” ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í•  ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ í‘œì‹œí•´ì•¼í•˜ëŠ” Google ì¸ì¦ í˜ì´ì§€ê°€ í‘œì‹œë˜ë©° ë¡œê·¸ ì•„ì›ƒ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤.</p>

<p>ìê²© ì¦ëª…ì„ ì‚½ì…í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´…ë‹ˆë‹¤. â€˜taskbuster/fixtures/google_user.jsonâ€™ íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ê¸°ì…í•©ë‹ˆë‹¤.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="nl">"Email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@gmail.com"</span><span class="p">,</span><span class="w"> </span><span class="nl">"Passwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_psw"</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>ìœ íš¨í•œ Google ê³„ì • ì •ë³´ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤. ì´ íŒŒì¼ì€ fixtures í´ë” ì•„ë˜ ìˆê¸° ë•Œë¬¸ì— Gitì—ëŠ” í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>Email, Passwd í‚¤ëŠ” Google ë¡œê·¸ì¸ ì–‘ì‹ì˜ html ìš”ì†Œ IDì…ë‹ˆë‹¤.</p>

<p>ê·¸ëŸ° ë‹¤ìŒ ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­ í•œ í›„ í˜¸íˆ´ ë  í…ŒìŠ¤íŠ¸ ë‚´ë¶€ì— ë‹¤ìŒ ë©”ì„œë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TestGoogleLogin</span><span class="p">(</span><span class="n">StaticLiveServerTestCase</span><span class="p">):</span>
    <span class="p">...</span>
    <span class="k">def</span> <span class="nf">user_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">json</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"taskbuster/fixtures/google_user.json"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">())</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="s">"Email"</span><span class="p">).</span><span class="n">send_keys</span><span class="p">(</span><span class="n">credentials</span><span class="p">[</span><span class="s">"Email"</span><span class="p">])</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">get_button_by_id</span><span class="p">(</span><span class="s">"next"</span><span class="p">).</span><span class="n">click</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">get_element_by_id</span><span class="p">(</span><span class="s">"Passwd"</span><span class="p">).</span><span class="n">send_keys</span><span class="p">(</span><span class="n">credentials</span><span class="p">[</span><span class="s">"Passwd"</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">btn</span> <span class="ow">in</span> <span class="p">[</span><span class="s">"signIn"</span><span class="p">,</span> <span class="s">"submit_approve_access"</span><span class="p">]:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">get_button_by_id</span><span class="p">(</span><span class="n">btn</span><span class="p">).</span><span class="n">click</span><span class="p">()</span>
        <span class="k">return</span>
    <span class="k">def</span> <span class="nf">test_google_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">...</span>
        <span class="n">google_login</span><span class="p">.</span><span class="n">click</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user_login</span><span class="p">()</span>
        <span class="p">...</span>
</code></pre></div></div>

<p>ì´ í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ë¸Œë¼ìš°ì €ì— ë‹¤ìŒ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>

<p><img src="/img/post/django/TB/google_browser.png" alt="" /></p>

<p>http://localhost:8081 ì´ ë¦¬ë‹¤ì´ë ‰ì…˜ URIê°€ ìœ íš¨í•˜ì§€ ì•ŠìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ëŠ” í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” URLì´ ì•„ë‹Œ http://127.0.0.1:8000 ì´ë¼ëŠ” ë‹¤ë¥¸ URLì„ ë“±ë¡í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<p>ê°œë°œì ì½˜ì†”ë¡œ ëŒì•„ê°€ url http://localhost:8081 ê³¼ í•´ë‹¹ ì½œë°± URLì„ ì•±ì— ë“±ë¡í•˜ì„¸ìš”.</p>

<p>ê·¸ëŸ° ë‹¤ìŒ â€˜taskbuster/fixtures/allauth_fixture.jsonâ€™ì„ ì—´ê³  localhost:8081ì— ëŒ€í•´ 127.0.0.1:8000ì˜ ëª¨ë“  í•­ëª©ì„ ë°”ê¿‰ë‹ˆë‹¤.(3ìœ¼ë¡œ ê³„ì‚°)</p>

<p>ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.</p>

<p>ì´ì œ ì¸ì¦ í”„ë¡œì„¸ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ, ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í™•ì¸ ì–‘ì‹ì´ ë“¤ì–´ìˆëŠ” ë‹¤ë¥¸ URLë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ ë©ë‹ˆë‹¤.</p>

<p>ì´ ë‹¨ê³„ë¥¼ ìƒëµí•˜ë ¤ë©´ â€˜taskbuster/urls.pyâ€™íŒŒì¼ì„ í¸ì§‘í•˜ê³  allauth.urls ë¥¼ í¬í•¨ì‹œí‚¤ê¸° ì „ì— ë‹¤ìŒ í–‰ì„ ì¶”ê°€í•˜ì„¸ìš”.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s">'^accounts/logout/$'</span><span class="p">,</span> <span class="s">'django.contrib.auth.views.logout'</span><span class="p">,</span> <span class="p">{</span><span class="s">'next_page'</span><span class="p">:</span> <span class="s">'/'</span><span class="p">}),</span>
</code></pre></div></div>

<p>ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìëŠ” ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•œ í›„ í™ˆí˜ì´ì§€ë¡œ ë˜ëŒì•„ê°‘ë‹ˆë‹¤.</p>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì œëŒ€ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</p>

<p><a href="http://www.marinamele.com/user-authentication-with-twitter-using-django-allauth">íŠ¸ìœ„í„°ë¡œ ë¡œê·¸ì¸í•˜ê¸°</a> ë‹¨ê³„ë„ ìˆì§€ë§Œ, êµ­ë‚´ì—ì„œëŠ” íŠ¸ìœ„í„°ê°€ ëŒ€ì„¸ê°€ ì•„ë‹ˆë¼ì„œ ê±´ë„ˆëœë‹ˆë‹¤.</p>

<p>ì§€ê¸ˆì€ êµ¬ê¸€ ë¡œê·¸ì¸ íƒœê·¸ë“¤ì´ ë°”ë€Œì–´ì„œ í…ŒìŠ¤íŠ¸ê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ì½”ë“œë¥¼ ì´ë¦¬ ì €ë¦¬ ìˆ˜ì •í–ˆëŠ”ë° ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ë²„íŠ¼ì´ ìë™ìœ¼ë¡œ í´ë¦­ì´ ë˜ì§€ ì•Šë„¤ìš”. ì´ ë¶€ë¶„ë§Œ ë„˜ì–´ê°€ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ëë‚¼ ìˆ˜ ìˆì„í…ë°, ì•„ì§ ì‚½ì§ˆ ì¤‘ì…ë‹ˆë‹¤.</p>

<p>ì‚½ì§ˆì€ ë‹µë‹µí•˜ì§€ë§Œ, ì‹¤ë ¥ í–¥ìƒì—ëŠ” ì´ë§Œí•œê²Œ ì—†ìœ¼ë‹ˆ!!</p>

<p>ê³„ì† ì—…ë°ì´íŠ¸ ì¤‘.</p>
:ET