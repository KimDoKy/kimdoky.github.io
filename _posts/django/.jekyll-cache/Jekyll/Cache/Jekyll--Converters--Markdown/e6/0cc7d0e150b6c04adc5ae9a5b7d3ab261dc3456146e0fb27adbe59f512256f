I"Š<h1 id="model-creation-foreignkey-relations-testing-and-the-django-admin"><a href="http://www.marinamele.com/taskbuster-django-tutorial/model-creation-foreignkey-relationship-testing-django-admin">Model creation, ForeignKey relations, testing and the Django Admin</a></h1>

<p>ì´ë²ˆ íŒŒíŠ¸ì—ì„œëŠ” ìš°ë¦¬ì˜ ëª¨ë¸ì„ ê³„ì† ì •ì˜í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” Projectì™€  Tag ëª¨ë¸ì„ ì •ì˜ í•  ê²ƒì´ë©°, Profile ëª¨ë¸ê³¼ <strong>Foreign Key</strong> ê´€ê³„ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>ë˜í•œ, <strong>inline model</strong> ì„ ì‚¬ìš©í•˜ì—¬ <strong>custom validation</strong>, í…ŒìŠ¤íŠ¸, customizing <strong>Admin Site</strong> ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.</p>

<p>ì´ë²ˆ íŒŒíŠ¸ì˜ ê°œìš”ì…ë‹ˆë‹¤.</p>

<ul>
  <li>UML Diagram ìˆ˜ì •</li>
  <li>The Project Model: Foreign Key Relationships and custom validators</li>
  <li>Tests for the Project Model</li>
  <li>Django Admin for the Project Model: custom list display and Model Inline</li>
  <li>The Tag Model: Another simple model with a ForeignKey relationship</li>
</ul>

<h2 id="uml-diagram-revision">UML Diagram Revision</h2>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ User ëª¨ë¸ê³¼ OneToOne ê´€ê³„ê°€ ìˆëŠ” <strong>Profile</strong> ëª¨ë¸ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>

<p>ëª¨ë¸ì˜ UML ë‹¤ì´ì–´ê·¸ë¨ì„ ì‚´í´ë´…ì‹œë‹¤.</p>

<p><img src="/img/post/django/TB/uml_10.png" alt="" /></p>

<p>ìš”ì ì€ ë‹¤ì‹œ ì–¸ê¸‰í•˜ìë©´,</p>

<ul>
  <li>Profile ëª¨ë¸ì—ëŠ” User ëª¨ë¸ê³¼ OneToOne ê´€ê³„ê°€ ìˆìŠµë‹ˆë‹¤.</li>
  <li>Project ëª¨ë¸ê³¼ Tag ëª¨ë¸ ëª¨ë‘ Profile ëª¨ë¸ê³¼ ForeignKey ê´€ê³„ê°€ ìˆìœ¼ë©°,</li>
  <li>Task ëª¨ë¸ì—ëŠ”</li>
  <li>Project ëª¨ë¸ê³¼ì˜ ForeignKey ê´€ê³„</li>
  <li>Tag ëª¨ë¸ê³¼ì˜ ManyToMany ê´€ê³„</li>
  <li>Task ëª¨ë¸(ìê¸° ìì‹ )ì˜ ìì²´ ForeignKey ê´€ê³„</li>
</ul>

<h2 id="the-project-model-foreign-key-relationships-and-custom-validators">The Project Model: Foreign Key Relationships and custom validators</h2>

<p>ë¨¼ì € ì—¬ëŸ¬ íƒœê·¸ ì´ë¦„ìœ¼ë¡œ ì‘ì—…ì„ ê·¸ë£¹í™”í•˜ëŠ”ë° ì‚¬ìš©í•  Project ëª¨ë¸ì„ ì •ì˜í•©ë‹ˆë‹¤.</p>

<p>ì´ ëª¨ë¸ì— ëŒ€í•œ ìì„¸í•œ UML ë‹¤ì´ì–´ê·¸ë ˜ì…ë‹ˆë‹¤.</p>

<p><img src="/img/post/django/TB/UML_project.png" alt="" /></p>

<p>â€˜taskbuster/apps/taskmanager/models.pyâ€™ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.core.validators</span> <span class="kn">import</span> <span class="n">RegexValidator</span>


<span class="k">class</span> <span class="nc">Project</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># Relations
</span>    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Profile</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s">"projects"</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">"user"</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="c1"># Attributes - Mandatory
</span>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">"name"</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">"Enter the project name"</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">"#fff"</span><span class="p">,</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">RegexValidator</span><span class="p">(</span>
            <span class="s">"(^#[0-9a-fA-F]{3}$)|(^#[0-9a-fA-F]{6}$)"</span><span class="p">)],</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">"color"</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">"Enter the hex color code, like #ccc or #cccccc"</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="c1"># Attributes - Optional
</span>    <span class="c1"># Object Manager
</span>    <span class="n">objects</span> <span class="o">=</span> <span class="n">managers</span><span class="p">.</span><span class="n">ProjectManager</span><span class="p">()</span>
    <span class="c1"># Custom Properties
</span>    <span class="c1"># Methods
</span>
    <span class="c1"># Meta and String
</span>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">"Project"</span><span class="p">)</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">"Projects"</span><span class="p">)</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"%s - %s"</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">user</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></div>

<p>â€˜taskbuster/apps/taskmanager/managers.pyâ€™ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProjectManager</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div></div>

<p>ì´ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<ul>
  <li>Project ëª¨ë¸ì€ Profile ëª¨ë¸ê³¼ ForeignKey ê´€ê³„</li>
  <li>ê° í”„ë¡œì íŠ¸ ì¸ìŠ¤í„´ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì‚¬ìš©ì í”„ë¡œí•„ê³¼ ê´€ë ¨ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.(í”„ë¡œí•„ í•„ë“œëŠ” í•„ìˆ˜ í•­ëª© ì„)</li>
  <li>ê° ì‚¬ìš©ì í”„ë¡œí•„ì€ 0ê°œ, í•˜ë‚˜ ì´ìƒì˜ í”„ë¡œì íŠ¸ì™€ ê´€ë ¨ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li>myprojectë¼ëŠ” í”„ë¡œì íŠ¸ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê´€ë ¨ profileì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. : <code class="language-plaintext highlighter-rouge">myproject.user</code></li>
  <li>Projectì— ì •ì˜ëœ ì†ì„± ì´ë¦„ì€ profileì´ ì•„ë‹ˆë¼ user ì…ë‹ˆë‹¤.</li>
  <li>myprofileë¼ëŠ” í”„ë¡œí•„ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê´€ë ¨ projectì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. : <code class="language-plaintext highlighter-rouge">myprofile.projects.all()</code></li>
  <li>related_nameì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">myprofile.projects.all()</code>ì„ ì‚¬ìš©í•˜ì—¬ profileì˜ projectë¥¼ ì—‘ì„¸ìŠ¤í•´ì•¼ í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">myprofile.project</code>ëŠ” object managerë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ í”„ë¡œì íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ <code class="language-plaintext highlighter-rouge">all()</code>, <code class="language-plaintext highlighter-rouge">filter()</code>, <code class="language-plaintext highlighter-rouge">exclude()</code> ë“±ê³¼ ê°™ì€ ì¼ë°˜ì ì¸ ì¿¼ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. custom ProjectManager í´ë˜ìŠ¤ì— ì •ì˜ëœ custom ë©”ì„œë“œë¥¼ í˜¸ì¶œ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</li>
  <li>ì´ë²ˆ ë¶€ë¶„ì—ì„œ ë³´ì•˜ë“¯ì´, ìì„¸í•œ ì´ë¦„ì€ ì´ ì†ì„±ì˜ ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” ì´ë¦„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
  <li>ugettext_lazy ë³€í™˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì ì„ ìœ ì˜í•˜ì„¸ìš”.</li>
  <li>í”„ë¡œì íŠ¸ì˜ ì´ë¦„ì€ <strong>CharField</strong> ì†ì„±ì´ë©°, ìµœëŒ€ ê¸¸ì´ëŠ” 100ìì…ë‹ˆë‹¤.</li>
  <li><strong>help_text</strong> ëŠ” model formsì— í‘œì‹œë˜ëŠ” í…ìŠ¤íŠ¸ì´ë¯€ë¡œ ì‚¬ìš©ìëŠ” ì‘ì„±í•´ì•¼ í•  ë‚´ìš©ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li><strong>Color</strong> ëŠ” ë‹¤ë¥¸ <strong>CharField</strong> ì†ì„±ì´ë©°, ìµœëŒ€ ê¸¸ì´ëŠ” 7ì…ë‹ˆë‹¤.</li>
  <li>Hex colorëŠ” 3ìë¦¬ 16ì§„ìˆ˜ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, 00ë¶€í„° FF ì‚¬ì´ì— ìˆê³ , red, green, blueì˜ ë ˆë²¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í•©ì³ ì“°ë©´ <strong>#XXXXXX</strong> ì™€ ê°™ì€ <code class="language-plaintext highlighter-rouge">#</code>ì„ ë”í•œ 6ê°œì˜ ë¬¸ìì—´ì„ ë§Œë“­ë‹ˆë‹¤.</li>
  <li>ì˜ˆë¥¼ ë“¤ì–´, blackì€ <strong>#000000</strong>, whiteëŠ” <strong>#FFFFFF</strong> ì…ë‹ˆë‹¤.</li>
  <li>í•˜ì§€ë§Œ 3ê°œì˜ ìˆ«ìê°€ #001122ì™€ ê°™ì´ ê°™ì€ ìŒìœ¼ë¡œ êµ¬ì„±ë  ê²½ìš° ê° ìˆ«ìëŠ” #012ì™€ ê°™ì´ í•œ ìë¦¬ë¡œ ì¶•ì•½ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë°©ë²•ìœ¼ë¡œ blackì€ #000, whiteëŠ” #FFFë¡œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
  <li>ê¸°ë³¸ì ìœ¼ë¡œ ì´ í•„ë“œëŠ” whiteì…ë‹ˆë‹¤.</li>
  <li>ì˜¬ë°”ë¥¸ 16ì§„ìˆ˜ ê°’ì„ í—ˆìš©í•˜ê¸° ìœ„í•´ custom validatorë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. <strong>RegexValidator</strong> ëŠ” ì§€ì •ëœ ì •ê·œ í‘œí˜„ì‹ê³¼ ì¼ì¹˜í•˜ëŠ” ë¬¸ìì—´ë§Œ í—ˆìš©í•©ë‹ˆë‹¤.</li>
  <li>ìš°ë¦¬ëŠ” managers.py, ProjectManagerì— ì •ì˜ëœ custom object managerë¥¼ í¬í•¨í•©ë‹ˆë‹¤.</li>
  <li>Metaì—ì„œëŠ” ì´ë ‡ê²Œ ì •ì˜í•©ë‹ˆë‹¤:</li>
  <li>ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ì˜ ì´ë¦„</li>
  <li>í”„ë¡œì íŠ¸ ì¸ìŠ¤í„´ìŠ¤ ì§ˆì˜ì˜ ê¸°ë³¸ ì •ë ¬ ìˆœì„œ</li>
  <li>ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ì—ì„œ ì •ì˜í•œ <code class="language-plaintext highlighter-rouge">unique_together</code> ì†ì„±ì€ ê°™ì€ í”„ë¡œí•„ì˜ ê²½ìš° ê°™ì€ ì´ë¦„ì˜ ë‘ í”„ë¡œì íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>
  <li><strong>str</strong> ë©”ì„œë“œëŠ” str() ë©”ì„œë“œê°€ admin ì‚¬ì´íŠ¸ì™€ ê°™ì´ ê°ì²´ì— í˜¸ì¶œë˜ê±°ë‚˜ Django í…œí”Œë¦¿ì— ê°ì²´ë¥¼ ë³´ì—¬ì¤„ ë•Œë§ˆë‹¤ í˜¸ì¶œë©ë‹ˆë‹¤.</li>
</ul>

<p>ì´ì œ ëª¨ë¸ì„ ì •ì˜í–ˆìœ¼ë¯€ë¡œ, ì´ëŸ¬í•œ ë³€ê²½ ì‚¬í•­ì„ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py check
$ python manage.py makemigrations taskmanager
$ python manage.py migrate taskmanager
</code></pre></div></div>

<p>ë‹¤ìŒì€ ì´ ëª¨ë¸ì— ëŒ€í•œ ëª‡ ê°€ì§€ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>

<h2 id="tests-for-the-project-model">Tests for the Project Model</h2>

<p>Django ëª¨ë¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ DJangoì˜ ê¸°ë³¸ê°’ì´ ì•„ë‹Œ ì†ì„±ì´ë‚˜ ë™ì‘ì„ ê°€ì§„ custom íŠ¹ì„±ê³¼ í•¨ìˆ˜ì—ë§Œ ì§‘ì¤‘í•©ë‹ˆë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´ CharFieldì—ì„œ max_lengthì˜ ì˜¬ë°”ë¥¸ ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ë‚´ì¥ ëœ ê¸°ëŠ¥ì´ë¯€ë¡œ Django ê°œë°œìê°€ ì¶©ë¶„íˆ í…ŒìŠ¤íŠ¸ë¥¼ ë§ˆì³¤ìŠµë‹ˆë‹¤.</p>

<p>ê·¸ëŸ¬ë‚˜ color ì†ì„±ì˜ ì‚¬ìš©ì ì§€ì • ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•œ ì¡¸ì€ ì •ê·œì‹ì„ ì‘ì„±í–ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<p>â€˜taskbuster/apps/taskmanager/tests.pyâ€™ì— ë‹¤ìŒ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.core.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">TestProjectModel</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">username</span><span class="o">=</span><span class="s">"taskbuster"</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">"django-tutorial"</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">user</span><span class="p">.</span><span class="n">profile</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user</span><span class="p">.</span><span class="n">delete</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_validation_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This first project uses the default value, #fff
</span>        <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">Project</span><span class="p">(</span>
            <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">profile</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s">"TaskManager"</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">project</span><span class="p">.</span><span class="n">color</span> <span class="o">==</span> <span class="s">"#fff"</span><span class="p">)</span>
        <span class="c1"># Validation shouldn't rise an Error
</span>        <span class="n">project</span><span class="p">.</span><span class="n">full_clean</span><span class="p">()</span>

        <span class="c1"># Good color inputs (without Errors):
</span>        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="p">[</span><span class="s">"#1cA"</span><span class="p">,</span> <span class="s">"#1256aB"</span><span class="p">]:</span>
            <span class="n">project</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
            <span class="n">project</span><span class="p">.</span><span class="n">full_clean</span><span class="p">()</span>

        <span class="c1"># Bad color inputs:
</span>        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="p">[</span><span class="s">"1cA"</span><span class="p">,</span> <span class="s">"1256aB"</span><span class="p">,</span> <span class="s">"#1"</span><span class="p">,</span> <span class="s">"#12"</span><span class="p">,</span> <span class="s">"#1234"</span><span class="p">,</span>
                      <span class="s">"#12345"</span><span class="p">,</span> <span class="s">"#1234567"</span><span class="p">]:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="p">.</span><span class="n">assertRaises</span><span class="p">(</span>
                    <span class="n">ValidationError</span><span class="p">,</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s">"%s didn't raise a ValidationError"</span> <span class="o">%</span> <span class="n">color</span><span class="p">):</span>
                <span class="n">project</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
                <span class="n">project</span><span class="p">.</span><span class="n">full_clean</span><span class="p">()</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">setUp</code> ë©”ì„œë“œëŠ” ê° ì‹œí—˜ì˜ ì‹œì‘ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</li>
  <li>user ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</li>
  <li>user ì¸ìŠ¤í„´ìŠ¤ëŠ” ê´€ë ¨ profile ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” signalsë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.</li>
  <li>ë‘˜ ë‹¤ ì¶”í›„ì— ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìŠ¤ìŠ¤ë¡œ ì €ì¥ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">test_validation_color</code>ëŠ” color ì†ì„±ì˜ ì—¬ëŸ¬ ì…ë ¥ í…ŒìŠ¤íŠ¸ë¥¼ í•©ë‹ˆë‹¤.</li>
  <li>ë¨¼ì € ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  <strong>ValidationError</strong> ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li>ë‹¤ìŒìœ¼ë¡œ ì˜¬ë°”ë¥¸ ì…ë ¥ì„ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li>ì˜ëª»ëœ ì…ë ¥ì´ <strong>ValidationError</strong> ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
  <li>ValidationErrorë¥¼ ë°œìƒì‹œí‚¤ë ¤ë©´ ì¸ìŠ¤í„´ìŠ¤ì˜ <code class="language-plaintext highlighter-rouge">full_clean()</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼í•©ë‹ˆë‹¤. ë‹¨ìˆœíˆ ë©”ì„œë“œë¥¼ ì €ì¥í•˜ë©´ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
  <li><code class="language-plaintext highlighter-rouge">tearDown</code> ë©”ì„œë“œëŠ” ê°ê°ì˜ í…ŒìŠ¤íŠ¸ì˜ ëì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</li>
  <li>ì‚¬ìš©ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</li>
  <li>ì‚¬ìš©ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚­ì œí•˜ë©´ ì´ ì¸ìŠ¤í„´ìŠ¤ì— ì¢…ì†ëœ ëª¨ë“  ê´€ë ¨ ì¸ìŠ¤í„´ìŠ¤ë„ ì‚­ì œë©ë‹ˆë‹¤.</li>
  <li>profileì€ ì‚¬ìš©ìì— ë‹¬ë ¤ìˆìŠµë‹ˆë‹¤.</li>
  <li>í”„ë¡œì íŠ¸ëŠ” profileì— ë‹¬ë ¤ìˆìŠµë‹ˆë‹¤.</li>
  <li>ì´ë ‡ê²Œí•˜ë©´ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸ ì‹œì‘ì‹œì²˜ëŸ¼ ê¹¨ë—í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ì´í•´í–ˆìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test taskbuster.apps.taskmanager.tests.TestProjectModel
</code></pre></div></div>

<h2 id="django-admin-for-the-project-model-custom-list-display-and-model-inline">Django Admin for the Project Model: custom list display and Model Inline</h2>

<p>ëª¨ë¸ì„ ì •ì˜í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ë§ˆì³¤ìœ¼ë‹ˆ, Admin ì‚¬ì´íŠ¸ì— ëª¨ë¸ì„ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ê·¸ëŸ¬ë‚˜ í”„ë¡œì íŠ¸ê°€ íŠ¹ì • ì‚¬ìš©ì í”„ë¡œí•„ê³¼ ê´€ë ¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì´ì „ ê²Œì‹œë¬¼ì—ì„œ ì •ì˜í•œ ProfileAdminì„ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ë ‡ê²Œí•˜ë©´ íŠ¹ì • í”„ë¡œí•„ì„ í¸ì§‘í•  ë•Œ ê´€ë ¨ í”„ë¡œì íŠ¸ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ í¸ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>â€˜taskbuster/apps/taskmanager/admin.pyâ€™ì˜ ProfileAdminì„ ìˆ˜ì •í•©ë‹ˆë‹¤</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding: utf-8 -*-
</span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span> <span class="nc">ProjectsInLine</span><span class="p">(</span><span class="n">admin</span><span class="p">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">Project</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">0</span>


<span class="o">@</span><span class="n">admin</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Profile</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ProfileAdmin</span><span class="p">(</span><span class="n">admin</span><span class="p">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">"username"</span><span class="p">,</span> <span class="s">"interaction"</span><span class="p">,</span> <span class="s">"_projects"</span><span class="p">)</span>

    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">"user__username"</span><span class="p">]</span>

    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ProjectsInLine</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">_projects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">.</span><span class="n">projects</span><span class="p">.</span><span class="nb">all</span><span class="p">().</span><span class="n">count</span><span class="p">()</span>
</code></pre></div></div>

<p>ì„œë²„ë¥¼ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ì‚¬í•­ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage runserver
</code></pre></div></div>

<p>Admin Profile ë¦¬ìŠ¤íŠ¸ë¡œ ì´ë™í•˜ì„¸ìš”. ì´ì „ ì½”ë“œë¥¼ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.</p>

<p>ë¨¼ì €, Profile ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìˆ˜ì •(ë˜ëŠ” Profile ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ëŠ” ê²½ìš° ìƒì„±)í•˜ì„¸ìš”. ë‹¤ìŒê³¼ ë¹„ìŠ·í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><img src="/img/post/django/TB/admin_profile_instance.png" alt="" /></p>

<p>ë§¨ ì•„ë˜ì— ë¸”ë¡œê·¸ì™€ TaskBusterì˜ ë‘ ê°€ì§€ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ë‘ í”„ë¡œì íŠ¸ê°€ ì™œ ì—¬ê¸°ì— ë‚˜íƒ€ë‚ ê¹Œìš”?</p>

<p>Django TabularInlineì—ì„œ ìƒì†ë°›ì€ ProjectsInLine í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProjectsInLine</span><span class="p">(</span><span class="n">admin</span><span class="p">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">Project</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>

<p>extra íŒŒë¼ë¯¸í„°ëŠ” Profile ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìˆ˜ì •í•  ë•Œ ì–¼ë§ˆë‚˜ ë§ì€ ì¶”ê°€ í”„ë¡œì íŠ¸ê°€ í‘œì‹œë˜ì–´ì•¼ í•˜ëŠ”ì§€ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.(ë¹„ì–´ìˆëŠ” ê²ƒìœ¼ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.) 5ë¡œ ë°”ê¾¸ê³  ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>

<p>ë˜í•œ <strong>ProjectsInLine</strong> ê³¼ <strong>ProfileAdmin</strong> ê°„ì˜ ì—°ê²°ì€ ì—¬ê¸°ì—ì„œ ìˆ˜í–‰ë©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">admin</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Profile</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ProfileAdmin</span><span class="p">(</span><span class="n">admin</span><span class="p">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="p">...</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ProjectsInLine</span>
    <span class="p">]</span>
    <span class="p">...</span>
</code></pre></div></div>

<p>Profile ì¸ìŠ¤í„´ìŠ¤ ë‚´ì— ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ ë•Œ ì´ ë‘ ê°ì²´ê°„ì˜ ê´€ê³„ê°€ ìë™ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤(í”„ë¡œì íŠ¸ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ Profile í•„ë“œë¥¼ ì§€ì •í•  í•„ìš”ê°€ ì—†ìŒ). ë˜í•œ í˜„ì¬ Profile ì¸ìŠ¤í„´ìŠ¤ì™€ ê´€ë ¨ëœ í”„ë¡œì íŠ¸ë§Œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>

<p>ë°˜ë©´, Profile ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ê°€ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>

<p><img src="/img/post/django/TB/admin_profile2.png" alt="" /></p>

<p>Username, Interaction, í”„ë¡œì íŠ¸ì™€ ê´€ê³„ëœ ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ Profile ì¸ìŠ¤í„´ìŠ¤ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>

<p>ì—¬ê¸°ì— ëª¨ë¸ ì†ì„±ë§Œ í‘œì‹œí•  ìˆ˜ ìˆëŠ”ê±¸ê¹Œìš”? ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¥¼ ì •ì˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<p>list_display ì†ì„±ì„ ì‚´í´ë´…ì‹œë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">"username"</span><span class="p">,</span> <span class="s">"interaction"</span><span class="p">,</span> <span class="s">"_projects"</span><span class="p">)</span>
</code></pre></div></div>

<p>uername, interaction, ëª¨ë¸ ì†ì„±ì´ë‚˜ ì‚¬ìš©ì ì†ì„±ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì†ì„± <code class="language-plaintext highlighter-rouge">_projects</code>ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ProfileAdmin ë‚´ë¶€ì— ì •ì˜ëœ ì‚¬ìš©ì ì •ì˜ ë©”ì„œë“œê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_projects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">.</span><span class="n">projects</span><span class="p">.</span><span class="nb">all</span><span class="p">().</span><span class="n">count</span><span class="p">()</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">self</code>(ProfileAdmin ì¸ìŠ¤í„´ìŠ¤)ì™€ <code class="language-plaintext highlighter-rouge">obj</code>(í¸ì§‘ì£¼ì¸ Profile ì¸ìŠ¤í„´ìŠ¤)ì˜ ë‘ ì¸ìˆ˜ë¥¼ ì·¨í•©ë‹ˆë‹¤.</p>

<p>ë”°ë¼ì„œ ì´ ë°©ë²•ì€ Profile ì¸ìŠ¤í„´ìŠ¤ì™€ ê´€ë ¨ëœ ëª¨ë“  í”„ë¡œì íŠ¸ë¥¼ ì¿¼ë¦¬í•˜ê³  ê³„ì‚°í•©ë‹ˆë‹¤.</p>

<h2 id="the-tag-model-another-simple-model-with-a-foreignkey-relationship">The Tag Model: Another simple model with a ForeignKey relationship</h2>

<p>UML ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ Tag ëª¨ë¸ì€ í”„ë¡œì íŠ¸ ëª¨ë¸ê³¼ ë§¤ìš° ë¹„ìŠ·í•©ë‹ˆë‹¤.</p>

<p><img src="/img/post/django/TB/uml_tag.png" alt="" /></p>

<ul>
  <li>profile ëª¨ë¸ê³¼ ForeignKey ê´€ê³„ê°€ ìˆìŠµë‹ˆë‹¤.</li>
  <li>name propertyê°€ ìˆìŠµë‹ˆë‹¤.</li>
</ul>

<p>ì¶”ê°€ ê¸°ëŠ¥ì´ ì—†ìœ¼ë¯€ë¡œ models.pyì™€ managers.py íŒŒì¼ì—ì„œ ì§ì ‘ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># models.py
</span>
<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># Relations
</span>    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Profile</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s">"tags"</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">"user"</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="c1"># Attributes - Mandatory
</span>    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s">"Name"</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="c1"># Attributes - Optional
</span>    <span class="c1"># Object Manager
</span>    <span class="n">objects</span> <span class="o">=</span> <span class="n">managers</span><span class="p">.</span><span class="n">TagManager</span><span class="p">()</span>
    <span class="c1"># Custom Properties
</span>    <span class="c1"># Methods
</span>
    <span class="c1"># Meta and String
</span>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">"Tag"</span><span class="p">)</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">"Tags"</span><span class="p">)</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="s">"name"</span><span class="p">,)</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="s">"name"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"%s - %s"</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">user</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># managers.py
</span>
<span class="k">class</span> <span class="nc">TagManager</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div></div>

<p>ê·¸ë¦¬ê³  admin.py íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ Tag ëª¨ë¸ì„ ì¸ë¼ì¸ìœ¼ë¡œ ì¶”ê°€í•˜ì„¸ìš”.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># admin.py
</span>
<span class="c1"># -*- coding: utf-8 -*-
</span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span> <span class="nc">ProjectsInLine</span><span class="p">(</span><span class="n">admin</span><span class="p">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">Project</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">class</span> <span class="nc">TagsInLine</span><span class="p">(</span><span class="n">admin</span><span class="p">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">Tag</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">0</span>


<span class="o">@</span><span class="n">admin</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Profile</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ProfileAdmin</span><span class="p">(</span><span class="n">admin</span><span class="p">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">"username"</span><span class="p">,</span> <span class="s">"interaction"</span><span class="p">,</span> <span class="s">"_projects"</span><span class="p">,</span> <span class="s">"_tags"</span><span class="p">)</span>

    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">"user__username"</span><span class="p">]</span>

    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ProjectsInLine</span><span class="p">,</span> <span class="n">TagsInLine</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">_projects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">.</span><span class="n">projects</span><span class="p">.</span><span class="nb">all</span><span class="p">().</span><span class="n">count</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">.</span><span class="n">tags</span><span class="p">.</span><span class="nb">all</span><span class="p">().</span><span class="n">count</span><span class="p">()</span>
</code></pre></div></div>

<p>ì´ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ì„¸ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py check
$ python manage.py makemigrations taskmanager
$ python manage.py migrate taskmanager
</code></pre></div></div>

<p>admin ì‚¬ì´íŠ¸ì—ì„œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py runserver
</code></pre></div></div>

<p><img src="/img/post/django/TB/admin_tag.png" alt="" /></p>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ê³  ê³ ì¥ë‚œ ê³³ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python manage.py test
</code></pre></div></div>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ë³€ê²½ ì‚¬í•­ì„ gitì— ì»¤ë°‹í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git status
$ git add .
$ git commit -m "End of part X"
</code></pre></div></div>
:ET