I"lÅ<h1 id="django-rest-framework---filtering">Django REST Framework - Filtering</h1>

<hr />
<p><em>â€œThe root QuerySet provided by the Manager describes all objects in the database table. Usually, though, youâ€™ll need to select only a subset of the complete set of objects.â€</em></p>

<p><em>â€œManagerê°€ ì œê³µí•˜ëŠ”  ë£¨íŠ¸ QuerySetì€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ëª¨ë“  ê°ì²´ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¼ë°˜ì ìœ¼ë¡œ ê°œì²´ì˜ ì „ì²´ ì§‘í•© ì¤‘ ì¼ë¶€ë§Œ ì„ íƒí•´ì•¼í•©ë‹ˆë‹¤.â€</em></p>

<p><em>â€” Django documentation</em></p>

<hr />

<h2 id="filtering">Filtering</h2>
<p>REST í”„ë ˆì„ì›Œí¬ì˜ <code class="language-plaintext highlighter-rouge">generic list view</code>ì˜ ê¸°ë³¸ ë™ì‘ ëª¨ë¸ managerì— ëŒ€í•œ ì „ì²´ QuerySetì„ ë°˜í™˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë•Œë•Œë¡œ ë‹¹ì‹  APIê°€ QuerySetì— ì˜í•´ ë°˜í™˜ ë˜ëœ í•­ëª©ì„ ì œí•œí•˜ê¸°ë¥¼ ì›í•  ê²ƒì…ë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">GenericAPIView</code>ë¥¼ í•˜ìœ„ í´ë˜ìŠ¤ë¡œ í•˜ëŠ” viewì˜ QuerySetë¥¼ í•„í„°ë§í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ <code class="language-plaintext highlighter-rouge">.get_queryset()</code>ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.<br />
ì´ ë©”ì†Œë“œì‘ ëŒ€ì²´ë¼ë©´ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ viewì—ì„œ ë¦¬í„´ ëœ querysetì„ custom í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="filtering-against-the-current-user-í˜„ì¬-ì‚¬ìš©ìì—-ëŒ€í•œ-í•„í„°ë§">Filtering against the current user (í˜„ì¬ ì‚¬ìš©ìì— ëŒ€í•œ í•„í„°ë§)</h3>
<p>ì¿¼ë¦¬ë¥¼ í•„í„°ë§í•˜ì—¬ ìš”ì²­ì„ í•œ í˜„ì¬ ì¸ì¦ ëœ ì‚¬ìš©ìì™€ ê´€ë ¨ëœ ê²°ê³¼ë§Œ ë°˜í™˜ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">request.user</code>ì˜ ê°’ì— ë”°ë¼ í•„í„°ë§ì„ ìˆ˜í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
ì˜ˆë¥¼ ë“¤ì–´:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Purchase</span>
<span class="kn">from</span> <span class="nn">myapp.serializers</span> <span class="kn">import</span> <span class="n">PurchaseSerializer</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">generics</span>

<span class="k">class</span> <span class="nc">PurchaseList</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">PurchaseSerializer</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        This view should return a list of all the purchases
        for the currently authenticated user.
        """</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">user</span>
        <span class="k">return</span> <span class="n">Purchase</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">purchaser</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="filtering-against-the-url">Filtering against the URL</h3>
<p>í•„í„°ë§ì˜ ë˜ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ì€ URL ì¼ë¶€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ querysetì„ ì œí•œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.<br />
ì˜ˆë¥¼ ë“¤ì–´ URLconfigì— ë‹¤ìŒê³¼ ê°™ì€ í•­ëª©ì´ í¬í•¨ ëœ ê²½ìš°:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span><span class="p">(</span><span class="s">'^purchases/(?P&lt;username&gt;.+)/$'</span><span class="p">,</span> <span class="n">PurchaseList</span><span class="p">.</span><span class="n">as_view</span><span class="p">()),</span>
</code></pre></div></div>
<p>ê·¸ëŸ° ë‹¤ìŒ URLì˜ ì‚¬ìš©ì ì´ë¦„ ë¶€ë¶„ìœ¼ë¡œ í•„í„°ë§ ëœ purchases querysetì„ ë°˜í™˜í•˜ëŠ” viewë¥¼ ì‘ì„± í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PurchaseList</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">PurchaseSerializer</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        This view should return a list of all the purchases for
        the user as determined by the username portion of the URL.
        """</span>
        <span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s">'username'</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Purchase</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">purchaser__username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="filtering-against-query-parameters">Filtering against query parameters</h3>
<p>ì´ˆê¸° ì¿¼ë¦¬ì…‹ì„ í•„í„°ë§í•˜ëŠ” ë§ˆì§€ë§‰ ì˜ˆëŠ” URLì˜ ì¿¼ë¦¬ parameterë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ˆê¸° ì¿¼ë¦¬ê²ì„ ê²°ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">http://example.com/api/purchases?username=denvercoder9</code>ê³¼ ê°™ì€ URLì„ ì²˜ë¦¬í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">.get.queryset()</code>ì„ ì¬ì •ì˜í•˜ê³  <code class="language-plaintext highlighter-rouge">username</code> ë§¤ê°œë³€ìˆ˜ê°€ URLì— í¬í•¨ë˜ì–´ìˆëŠ” ê²½ìš°ì—ë§Œ ì¿¼ë¦¬ì…‹ì„ í•„í„°ë§í•˜ì„¸ìš”.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PurchaseList</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">PurchaseSerializer</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        Optionally restricts the returned purchases to a given user,
        by filtering against a `username` query parameter in the URL.
        """</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Purchase</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
        <span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">query_params</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'username'</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">username</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">queryset</span> <span class="o">=</span> <span class="n">queryset</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">purchaser__username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">queryset</span>
</code></pre></div></div>

<hr />

<h3 id="generic-filtering">Generic Filtering</h3>
<p>ê¸°ë³¸ ì¿¼ë¦¬ì…‹ì„ ì¬ì •ì˜ í•  ìˆ˜ ìˆì„ë¿ë§Œ ì•„ë‹ˆë¼ REST í”„ë ˆì„ì›Œí¬ëŠ” ë³µì¡í•œ ê²€ìƒ‰ ë° í•„í„°ë¥¼ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ì¼ë°˜ í•„í„°ë§ ë°±ì—”ë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.<br />
Generic filterëŠ” browsable API ë° admin APIì—ì„œ HTML ì»¨íŠ¸ë¡¤ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
<img src="./images/genericfiltering.png" alt="" /></p>

<h3 id="setting-filter-backends">Setting filter backends</h3>
<p>ê¸°ë³¸ í•„í„° ë°±ì—”ë“œëŠ” <code class="language-plaintext highlighter-rouge">DEFAULT_FILTER_BACKENDS</code> ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ ì „ì²´ì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´,</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'DEFAULT_FILTER_BACKENDS'</span><span class="p">:</span> <span class="p">(</span><span class="s">'django_filters.rest_framework.DjangoFilterBackend'</span><span class="p">,)</span>
<span class="p">}</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">GenericAPIView</code> CBVë¥¼ ì‚¬ìš©í•˜ì—¬ view ë‹¹ ë˜ëŠ” viewset ë‹¨ìœ„ë¡œ í•„í„° ë°±ì—”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">django_filters.rest_framework</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">myapp.serializers</span> <span class="kn">import</span> <span class="n">UserSerializer</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">generics</span>

<span class="k">class</span> <span class="nc">UserListView</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">django_filters</span><span class="p">.</span><span class="n">rest_framework</span><span class="p">.</span><span class="n">DjangoFilterBackend</span><span class="p">,)</span>
</code></pre></div></div>

<h3 id="filtering-and-object-lookups">Filtering and object lookups</h3>
<p>í•„í„° ë°±ì—”ë“œëŠ” viewì— ëŒ€í•´ êµ¬ì„±ë˜ê³  list viewë¥¼ í•„í„°ë§í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ê²½ìš°, í•˜ë‚˜ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ”ë° ê°€ìš©ë˜ëŠ” querysetì„ í•„í„°ë§í•˜ëŠ”ë°ì—ë„ ì‚¬ìš©ë©ë‹ˆë‹¤.<br />
ì˜ˆë¥¼ ë“¤ì–´, ì•ì˜ ì˜ˆì œì™€ idê°€ 4675ì¸ ì œí’ˆì˜ ê²½ìš° ë‹¤ìŒ URLì€ í•´ë‹¹ ì œí’ˆ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ í•„í„°ë§ ì¡°ê±´ì´ ì¶©ì¡±ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ í•´ë‹¹ ê°ì²´ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ 404 ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/products/4675/?category=clothing&amp;max_price=10.00
</code></pre></div></div>

<h3 id="overriding-the-initial-queryset">Overriding the initial queryset</h3>
<p>ì˜¤ë²„ë¼ì´ë“œ ëœ <code class="language-plaintext highlighter-rouge">.get_queryset()</code>ê³¼ generic filteringì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ê²ƒì´ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code class="language-plaintext highlighter-rouge">Product</code>ê°€ <code class="language-plaintext highlighter-rouge">User</code>ë¼ëŠ” êµ¬ë§¤ìì™€ <code class="language-plaintext highlighter-rouge">many-to-many</code>ê´€ê³„ë¥¼ ê°–ê³  ìˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ viewë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PurchasedProductsList</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="s">"""
    Return a list of all the products that the authenticated
    user has ever purchased, with optional filtering.
    """</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Product</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProductSerializer</span>
    <span class="n">filter_class</span> <span class="o">=</span> <span class="n">ProductFilter</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">user</span>
        <span class="k">return</span> <span class="n">user</span><span class="p">.</span><span class="n">purchase_set</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
</code></pre></div></div>

<hr />

<h2 id="api-guide">API Guide</h2>

<h3 id="djangofilterbackend">DjangoFilterBackend</h3>
<p><code class="language-plaintext highlighter-rouge">django-filter</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” REST í”„ë ˆì„ì›Œí¬ì— ëŒ€í•´ ê³ ë„ì˜ customì´ ê°€ëŠ¥í•œ í•„ë“œ í•„í„°ë§ì„ ì§€ì›í•˜ëŠ” <code class="language-plaintext highlighter-rouge">DjangoFilterBackend</code>í´ë˜ìŠ¤ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">DjangoFilterBackend</code>ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € <code class="language-plaintext highlighter-rouge">django-filter</code>ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install django-filter
</code></pre></div></div>
<p>ì´ì œ í•„í„° ë°±ì—”ë“œë¥¼ ì„¤ì •ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'DEFAULT_FILTER_BACKENDS'</span><span class="p">:</span> <span class="p">(</span><span class="s">'django_filters.rest_framework.DjangoFilterBackend'</span><span class="p">,)</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ë˜ëŠ” í•„í„° ë°±ì—”ë“œë¥¼ ê°œë³„ view ë˜ëŠ” viewsetì— ì¶”ê°€í•˜ì„¸ìš”.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django_filters.rest_framework</span> <span class="kn">import</span> <span class="n">DjangoFilterBackend</span>

<span class="k">class</span> <span class="nc">UserListView</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="p">...</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">DjangoFilterBackend</span><span class="p">,)</span>
</code></pre></div></div>
<p>browsable APIë‚˜ admin APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, <code class="language-plaintext highlighter-rouge">django-crispy-forms</code>ë¥¼ ì„¤ì¹˜í•˜ì—¬ HTML Viewì—ì„œ í•„í„° ì–‘ì‹ì˜ í‘œì‹œë¥¼ í–¥ìƒì‹œí‚¤ê³  ë¶€íŠ¸ìŠ¤íŠ¸ë©3 HTMLì„ ëœë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install django-crispy-forms
</code></pre></div></div>
<p>crispy-forms ë¥¼ ì„¤ì¹˜í•˜ê³  Djangoì˜ <code class="language-plaintext highlighter-rouge">INSTALLED_APPS</code>ì— ì¶”ê°€í•˜ë©´ browsable APIëŠ” ë‹¤ìŒê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">DjangoFilterBackend</code>ì— ëŒ€í•œ í•„í„°ë§ ì»¨íŠ¸ë¡¤ì„ ì œê³µí•©ë‹ˆë‹¤.</p>

<p><img src="./images/fieldfilter.png" alt="" /></p>

<h4 id="specifying-filter-fields">Specifying filter fields</h4>
<p>í•„ìš”í•œ ê²ƒì€ ê°„ë‹¨í•œ equality-based í•„í„°ë§ ë¿ì…ë‹ˆë‹¤. í•„í„°ë§ í•  í•„ë“œ ì§‘í•©ì„ ë‚˜ì—´í•˜ëŠ” view ë˜ëŠ” viewsetì— <code class="language-plaintext highlighter-rouge">filter_fields</code> ì†ì„±ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProductList</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProductSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">DjangoFilterBackend</span><span class="p">,)</span>
    <span class="n">filter_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'category'</span><span class="p">,</span> <span class="s">'in_stock'</span><span class="p">)</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ í•˜ë©´ ì£¼ì–´ì§„ í•„ë“œì— ëŒ€í•œ <code class="language-plaintext highlighter-rouge">FilterSet</code>í´ë˜ìŠ¤ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ë©° ë‹¤ìŒê³¼ ê°™ì€ ìš”ì²­ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/products?category=clothing&amp;in_stock=True
</code></pre></div></div>

<h4 id="specifying-a-filterset-filterset-ì§€ì •í•˜ê¸°">Specifying a FilterSet (FilterSet ì§€ì •í•˜ê¸°)</h4>
<p>ê³ ê¸‰ í•„í„°ë§ ìš”êµ¬ ì‚¬í•­ì˜ ê²½ìš° viewì—ì„œ ì‚¬ìš©í•´ì•¼í•˜ëŠ” <code class="language-plaintext highlighter-rouge">FilterSet</code>í´ë˜ìŠ¤ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆ:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">django_filters</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Product</span>
<span class="kn">from</span> <span class="nn">myapp.serializers</span> <span class="kn">import</span> <span class="n">ProductSerializer</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">generics</span>

<span class="k">class</span> <span class="nc">ProductFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="p">.</span><span class="n">rest_framework</span><span class="p">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">min_price</span> <span class="o">=</span> <span class="n">django_filters</span><span class="p">.</span><span class="n">NumberFilter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"price"</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s">'gte'</span><span class="p">)</span>
    <span class="n">max_price</span> <span class="o">=</span> <span class="n">django_filters</span><span class="p">.</span><span class="n">NumberFilter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"price"</span><span class="p">,</span> <span class="n">lookup_expr</span><span class="o">=</span><span class="s">'lte'</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Product</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'category'</span><span class="p">,</span> <span class="s">'in_stock'</span><span class="p">,</span> <span class="s">'min_price'</span><span class="p">,</span> <span class="s">'max_price'</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">ProductList</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ProductSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">django_filters</span><span class="p">.</span><span class="n">rest_framework</span><span class="p">.</span><span class="n">DjangoFilterBackend</span><span class="p">,)</span>
    <span class="n">filter_class</span> <span class="o">=</span> <span class="n">ProductFilter</span>
</code></pre></div></div>
<p>ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìš”ì²­ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/products?category=clothing&amp;max_price=10.00
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">django-filter</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ê³„ë¥¼ í™•ì¥í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê° ì œí’ˆì—ëŠ” ì œì¡°ì—…ì²´ ëª¨ë¸ì— ëŒ€í•œ ì™¸ë˜ í‚¤ê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì—¬ ì œì¡°ì—…ì²´ ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ í•„í„°ë§ í•˜ëŠ” í•„í„°ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì˜ˆ:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">django_filters</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Product</span>
<span class="kn">from</span> <span class="nn">myapp.serializers</span> <span class="kn">import</span> <span class="n">ProductSerializer</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">generics</span>

<span class="k">class</span> <span class="nc">ProductFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="p">.</span><span class="n">rest_framework</span><span class="p">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Product</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'category'</span><span class="p">,</span> <span class="s">'in_stock'</span><span class="p">,</span> <span class="s">'manufacturer__name'</span><span class="p">]</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/products?manufacturer__name=foo
</code></pre></div></div>
<p>ì´ê²ƒì€ ì¢‹ì€ ì¼ì´ì§€ë§Œ Djangoì˜ double-underscore ê·œì¹™ì„ APIì˜ ì¼ë¶€ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ëŒ€ì‹  ëª…ì‹ì ìœ¼ë¡œ í•„í„° ì¸ìˆ˜ì˜ ì´ë¦„ì„ ì§€ì •í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">FilterSet</code>í´ë˜ìŠ¤ì— í•„í„° ì¸ìˆ˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">django_filters</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Product</span>
<span class="kn">from</span> <span class="nn">myapp.serializers</span> <span class="kn">import</span> <span class="n">ProductSerializer</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">generics</span>

<span class="k">class</span> <span class="nc">ProductFilter</span><span class="p">(</span><span class="n">django_filters</span><span class="p">.</span><span class="n">rest_framework</span><span class="p">.</span><span class="n">FilterSet</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">django_filters</span><span class="p">.</span><span class="n">CharFilter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"manufacturer__name"</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Product</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'category'</span><span class="p">,</span> <span class="s">'in_stock'</span><span class="p">,</span> <span class="s">'manufacturer'</span><span class="p">]</span>
</code></pre></div></div>
<p>ì´ì œ ë‹¤ìŒì„ ì‹¤í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/products?manufacturer=foo
</code></pre></div></div>
<p>í•„í„° ì…‹ ì‚¬ìš©ë° ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href="https://django-filter.readthedocs.io/en/latest/index.html">django-filter documentation</a>ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.</p>

<hr />
<p><strong>Hints &amp; Tips</strong></p>

<ul>
  <li>ê¸°ë³¸ì ìœ¼ë¡œ í•„í„°ë§ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">DjangoFilterBackend</code>ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">DEFAULT_FILTER_BACKENDS</code>ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</li>
  <li>Boolean í•„ë“œë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">0</code>, <code class="language-plaintext highlighter-rouge">1</code>, <code class="language-plaintext highlighter-rouge">true</code> ë‚˜ <code class="language-plaintext highlighter-rouge">false</code>ê°€ ì•„ë‹Œ URL ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ì— <code class="language-plaintext highlighter-rouge">True</code> ë° <code class="language-plaintext highlighter-rouge">False</code> ê°’ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. (í—ˆìš©ëœ boolean ê°’ì€ í˜„ì¬ Djangoì˜ <a href="https://github.com/django/django/blob/master/django/forms/widgets.py">NullBooleanSelect implementation</a>ì—ì„œ ê³ ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.)</li>
  <li><code class="language-plaintext highlighter-rouge">django-filter</code>ëŠ” Djangoì˜ double-underscore ë¬¸ë²•ì„ í†µí•´ ê´€ê³„ê°€ ë§ºì–´ì§„ í•„í„°ë§ì„ ì§€ì›í•©ë‹ˆë‹¤.</li>
</ul>

<hr />

<h3 id="searchfilter">SearchFilter</h3>
<p><code class="language-plaintext highlighter-rouge">SearchFilter</code>í´ë˜ìŠ¤ëŠ” ê°„ë‹¨í•œ ë‹¨ì¼ ì¿¼ë¦¬ parameter ê¸°ë°˜ ê²€ìƒ‰ì„ ì§€ì›í•˜ë©° <a href="https://docs.djangoproject.com/en/1.10/ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields">django ê´€ë¦¬ìì˜ ê²€ìƒ‰ ê¸°ëŠ¥</a>ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.<br />
ì‚¬ìš© ì¤‘ì—ëŠ” browsable APIì— <code class="language-plaintext highlighter-rouge">SearchFilter</code> ì»¨íŠ¸ë¡¤ì´ í¬í•¨ë©ë‹ˆë‹¤.</p>

<p><img src="./images/searchfilter.png" alt="" /></p>

<p><code class="language-plaintext highlighter-rouge">SearchFilter</code>í´ë˜ìŠ¤ëŠ” ë·°ì— <code class="language-plaintext highlighter-rouge">search_fields</code>ì†ì„±ì´ ì„¤ì •ëœ ê²½ìš°ì—ë§Œ ì ìš©ë©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">search_fields</code>ì†ì„±ì€ <code class="language-plaintext highlighter-rouge">CharField</code>ë˜ëŠ” <code class="language-plaintext highlighter-rouge">TextField</code>ì™€ ê°™ì´ ëª¨ë¸ì˜ í…ìŠ¤íŠ¸ ìœ í˜• í•„ë“œì˜ ì´ë¦„ì˜ listì´ì–´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserListView</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">SearchFilter</span><span class="p">,)</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'username'</span><span class="p">,</span> <span class="s">'email'</span><span class="p">)</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì—¬ listì˜ itemsë¥¼ í•„í„°ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/users?search=russell
</code></pre></div></div>
<p>ê²€ìƒ‰ API double-underscore í‘œê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ <code class="language-plaintext highlighter-rouge">ForeignKey</code> ë˜ëŠ” <code class="language-plaintext highlighter-rouge">ManyToManyField</code>ì—ì„œ ê´€ë ¨ ì¡°íšŒë¥¼ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'username'</span><span class="p">,</span> <span class="s">'email'</span><span class="p">,</span> <span class="s">'profile__profession'</span><span class="p">)</span>
</code></pre></div></div>
<p>ê¸°ë³¸ì ìœ¼ë¡œ ê²€ìƒ‰ì€ ëŒ€ì†Œ ë¬¸ìë¥¼ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ ì¼ì¹˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê²€ìƒ‰ parameterì—ëŠ” ê³µë°± ë˜ëŠ” <code class="language-plaintext highlighter-rouge">/</code>ë˜ëŠ” ì‰¼í‘œë¡œ êµ¬ë¶„ ëœ ì—¬ëŸ¬ ê²€ìƒ‰ì–´ê°€ í¬í•¨ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ê²€ìƒ‰ì–´ê°€ ì‚¬ìš©ë˜ë©´ ì œê³µëœ ëª¨ë“  ìš©ì–´ê°€ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ì—ë§Œ listì—ì„œ ê°ì²´ê°€ ë°˜í™˜ë©ë‹ˆë‹¤.<br />
ê²€ìƒ‰ ë™ì‘ì€ ë‹¤ì–‘í•œ ë¬¸ìë¥¼ <code class="language-plaintext highlighter-rouge">search_fields</code>ì•ì— ë¶™ì´ë©´ ì œí•œ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">'^'</code>: ê²€ìƒ‰ì„ ì‹œì‘í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">'='</code>: ì •í™•íˆ ì¼ì¹˜</li>
  <li><code class="language-plaintext highlighter-rouge">'@'</code>: ì „ì²´ í…ìŠ¤íŠ¸ ê²€ìƒ‰ (í˜„ì¬ djangoì˜ MySQL ë°±ì—”ë“œë§Œ ì§€ì›ë©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">'$'</code>: ì •ê·œì‹ ê²€ìƒ‰</li>
</ul>

<p>ì˜ˆë¥¼ ë“¤ë©´ :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'=username'</span><span class="p">,</span> <span class="s">'=email'</span><span class="p">)</span>
</code></pre></div></div>

<p>ê¸°ë³¸ì ìœ¼ë¡œ ê²€ìƒ‰ parameterì˜ ì´ë¦„ì€ <code class="language-plaintext highlighter-rouge">'search'</code>ì´ì§€ë§Œ <code class="language-plaintext highlighter-rouge">SEARCH_PARAM</code> ì„¤ì •ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
ìì„¸í•œ ë‚´ìš©ì€ <a href="https://docs.djangoproject.com/en/1.10/ref/contrib/admin/parameter#django.contrib.admin.ModelAdmin.search_fields">ì¥ê³  ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.</p>

<hr />

<h3 id="orderingfilter">OrderingFilter</h3>
<p><code class="language-plaintext highlighter-rouge">OrderingFilter</code>í´ë˜ìŠ¤ëŠ” ì¿¼ë¦¬ parameterë¡œ ì œì–´ë˜ëŠ” ê°„ë‹¨í•œ ê²°ê³¼ ìˆœì„œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>

<p><img src="./images/orderingfilter.png" alt="" /></p>

<p>ê¸°ë³¸ì ìœ¼ë¡œ ì¿¼ë ˆ parameterì˜ ì´ë¦„ì€ <code class="language-plaintext highlighter-rouge">'ordering'</code>ì´ì§€ë§Œ, <code class="language-plaintext highlighter-rouge">ORDERING_PARAM</code>ì„¤ì •ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ì ì´ë¦„ë³„ë¡œ ì‚¬ìš©ìë¥¼ ì •ë ¬ í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•˜ì„¸ìš”.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/users?ordering=username
</code></pre></div></div>
<p>í´ë¼ì´ì–¸íŠ¸ëŠ” í•„ë“œ ì´ë¦„ì˜ ì ‘ë‘ì‚¬ë¥¼ <code class="language-plaintext highlighter-rouge">'-'</code>ë¡œ ì§€ì •í•¨ìœ¼ë¡œì¨ ì—­ìˆœìœ¼ë¡œ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/users?ordering=-username
</code></pre></div></div>
<p>ì—¬ëŸ¬ ê°œì˜  ìˆœì„œë„ ì§€ì • í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://example.com/api/users?ordering=account,username
</code></pre></div></div>

<h4 id="specifying-which-fields-may-be-ordered-against">Specifying which fields may be ordered against</h4>
<p>APIê°€ ì •ë ¬ í•„í„°ì—ì„œ í—ˆìš©í•´ì•¼í•˜ëŠ” í•„ë“œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ viewì—ì„œ <code class="language-plaintext highlighter-rouge">ordering_fields</code>ì†ì„±ì„ ì„¤ì •í•˜ì—¬ ì´ë¥¼ ìˆ˜í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserListView</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">OrderingFilter</span><span class="p">,)</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'username'</span><span class="p">,</span> <span class="s">'email'</span><span class="p">)</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìê°€ ì•”í˜¸ í•´ì‹œ í•„ë“œë‚˜ ê¸°íƒ€ ì¤‘ìš”í•œ ë°ì´í„°ì— ëŒ€í•´ ì •ë ¬í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë“± ì˜ˆê¸°ì¹˜ ì•Šì€ ë°ì´í„° ìœ ì¶œì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
viewì—ì„œ <code class="language-plaintext highlighter-rouge">ordering_fields</code>ì†ì„±ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ í•„í„° í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">serializer_class</code>ì†ì„±ì„ ì§€ì •ëœ serializerì˜ ì½ì„ ìˆ˜ ìˆëŠ” í•„ë“œë¥¼ í•„í„°ë§ í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.</p>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">ordering_fields</code>ì— í•œê°œì˜ ì¡°ê±´(ex. start_date)ë§Œ ë„£ìœ¼ë©´, <code class="language-plaintext highlighter-rouge">pagination</code> ì‚¬ìš©ì‹œ ì¤‘ë³µë˜ëŠ” ì¡°ê±´ì— ëŒ€í•˜ì—¬ ì–´ë–¤ ê²ƒì„ ì•ì— ë‘ì–´ì•¼í•˜ëŠ”ì§€ì— ëŒ€í•œ ì´ìŠˆê°€ ì¼ì–´ë‚˜ì„œ í˜ì´ì§€ê°€ ë„˜ì–´ê°ˆë•Œ ì¤‘ë³µëœ ê°’ì´ ì¶œë ¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‘ê°œ ì´ìƒì˜ ì¡°ê±´ì„ ì œì‹œí•˜ë©´ pagination ì‹œ ì¤‘ë³µëœ ê°’ì˜ ì¶œë ¥ì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>

<p>ë·°ì— ì‚¬ìš© ëœ ì¿¼ë¦¬ì…‹ì€ ì¤‘ìš”í•œ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆì§€ ì•Šì€ ê²ƒìœ¼ë¡œ í™•ì‹ í•˜ëŠ” ê²½ìš°, íŠ¹ìˆ˜ ê°’ <code class="language-plaintext highlighter-rouge">'__all__'</code>ì„ ì‚¬ìš©í•˜ì—¬ viewê°€ ëª¨ë“  ëª¨ë¸ í•„ë“œ ë˜ëŠ” ì¿¼ë¦¬ì…‹ í•©ê³„ì—ì„œ ì •ë ¬ì„ í—ˆìš©í•˜ë„ë¡ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">BookingsListView</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Booking</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">BookingSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">OrderingFilter</span><span class="p">,)</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="s">'__all__'</span>
</code></pre></div></div>

<h4 id="specifying-a-default-ordering">Specifying a default ordering</h4>
<p><code class="language-plaintext highlighter-rouge">ordering</code> ì†ì„±ì´ viewì— ì„¤ì •ë˜ì–´ ìˆëŠ” ê²½ìš°, ì´ê²ƒì€ ê¸°ë³¸ ìˆœì„œë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.<br />
ì¼ë°˜ì ìœ¼ë¡œ ì´ˆê¸° ì¿¼ë¦¬ì…‹ì—ì„œ <code class="language-plaintext highlighter-rouge">order_by</code>ë¥¼ ì„¤ì •í•˜ì—¬ ì´ ì‘ì—…ì„ ì œì–´í•  ìˆ˜ ìˆì§€ë§Œ viewì˜ <code class="language-plaintext highlighter-rouge">ordering</code> parameterë¥¼ ì‚¬ìš©í•˜ë©´ ë Œë”ë§ ëœ í…œí”Œë¦¿ì— ì»¨í…ìŠ¤íŠ¸ë¡œ ìë™ ì „ë‹¬ í•  ìˆ˜ ìˆëŠ” ë°©ì‹ìœ¼ë¡œ ìˆœì„œë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ê²°ê³¼ë¥¼ ì •ë ¬í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” ê²½ìš°, column headersë¥¼ ìë™ìœ¼ë¡œ ë‹¤ë¥´ê²Œ ë Œë”ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserListView</span><span class="p">(</span><span class="n">generics</span><span class="p">.</span><span class="n">ListAPIView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">UserSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">OrderingFilter</span><span class="p">,)</span>
    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'username'</span><span class="p">,</span> <span class="s">'email'</span><span class="p">)</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s">'username'</span><span class="p">,)</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">ordering</code> ì†ì„±ì€ ë¬¸ìì—´ì´ê±°ë‚˜ ë¬¸ìì—´ì˜ list/tuple ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<hr />

<h3 id="djangoobjectpermissionsfilter">DjangoObjectPermissionsFilter</h3>
<p><code class="language-plaintext highlighter-rouge">DjangoObjectPermissionsFilter</code>ëŠ” <code class="language-plaintext highlighter-rouge">django-guardian</code>íŒ¨í‚¤ì§€ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ë©° custom <code class="language-plaintext highlighter-rouge">'view'</code> ê¶Œí•œì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. í•„í„°ëŠ” ì¿¼ë¦¬ì…‹ì´ ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ view ê¶Œí•œì´ ìˆëŠ” ê°ì²´ë§Œ ë°˜í™˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">DjangoObjectPermissionsFilter</code>ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ì ì ˆí•œ ê°ì²´ ê¶Œí•œ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ì—¬ ì ì ˆí•œ ê°ì²´ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‘ì—… í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ <code class="language-plaintext highlighter-rouge">DjangoObjectPermissions</code>ë¥¼ ì„œë¸Œ í´ë˜ìŠ¤í™”í•˜ê³  <code class="language-plaintext highlighter-rouge">perms_map</code>ì†ì„±ì— <code class="language-plaintext highlighter-rouge">'view'</code>ê¶Œí•œì„ ì¶”ê°€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">DjangoObjectPermissionsFilter</code>ì™€ <code class="language-plaintext highlighter-rouge">DjangoObjectPermissions</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ì™„ì „í•œ ì˜ˆëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<p><strong>permission.py</strong>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CustomObjectPermissions</span><span class="p">(</span><span class="n">permissions</span><span class="p">.</span><span class="n">DjangoObjectPermissions</span><span class="p">):</span>
    <span class="s">"""
    Similar to `DjangoObjectPermissions`, but adding 'view' permissions.
    """</span>
    <span class="n">perms_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'GET'</span><span class="p">:</span> <span class="p">[</span><span class="s">'%(app_label)s.view_%(model_name)s'</span><span class="p">],</span>
        <span class="s">'OPTIONS'</span><span class="p">:</span> <span class="p">[</span><span class="s">'%(app_label)s.view_%(model_name)s'</span><span class="p">],</span>
        <span class="s">'HEAD'</span><span class="p">:</span> <span class="p">[</span><span class="s">'%(app_label)s.view_%(model_name)s'</span><span class="p">],</span>
        <span class="s">'POST'</span><span class="p">:</span> <span class="p">[</span><span class="s">'%(app_label)s.add_%(model_name)s'</span><span class="p">],</span>
        <span class="s">'PUT'</span><span class="p">:</span> <span class="p">[</span><span class="s">'%(app_label)s.change_%(model_name)s'</span><span class="p">],</span>
        <span class="s">'PATCH'</span><span class="p">:</span> <span class="p">[</span><span class="s">'%(app_label)s.change_%(model_name)s'</span><span class="p">],</span>
        <span class="s">'DELETE'</span><span class="p">:</span> <span class="p">[</span><span class="s">'%(app_label)s.delete_%(model_name)s'</span><span class="p">],</span>
    <span class="p">}</span>
</code></pre></div></div>

<p><strong>views.py</strong>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">EventViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="p">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
    <span class="s">"""
    Viewset that only lists events if user has 'view' permissions, and only
    allows operations on individual events if user has appropriate 'view', 'add',
    'change' or 'delete' permissions.
    """</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Event</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">EventSerializer</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">DjangoObjectPermissionsFilter</span><span class="p">,)</span>
    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">(</span><span class="n">myapp</span><span class="p">.</span><span class="n">permissions</span><span class="p">.</span><span class="n">CustomObjectPermissions</span><span class="p">,)</span>
</code></pre></div></div>

<p>ëª¨ë¸ì— ëŒ€í•œ <code class="language-plaintext highlighter-rouge">'view'</code>ê¶Œí•œì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href="https://django-guardian.readthedocs.io/en/latest/userguide/assign.html"><code class="language-plaintext highlighter-rouge">django-guardian</code>ì˜ relevant section </a>ê³¼ ì´ <a href="http://blog.nyaruka.com/adding-a-view-permission-to-django-models">ë¸”ë¡œê·¸ ê²Œì‹œë¬¼</a>ì„ ì°¸ì¡°í•˜ì„¸ìš”.</p>

<hr />

<h2 id="custom-generic-filtering">Custom generic filtering</h2>
<p>ë‚˜ë§Œì˜ generic í•„í„°ë§ ë°±ì—”ë“œë¥¼ ì œê³µí•˜ê±°ë‚˜, ë‹¤ë¥¸ ê°œë°œìê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì„¤ì¹˜ ê°€ëŠ¥í•œ ì•±ì„ ì‘ì„± í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.<br />
ì´ë ‡ê²Œí•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">BaseFilterBackend</code>ë¥¼ ë¬´ì‹œí•˜ê³  <code class="language-plaintext highlighter-rouge">.filter_queryset(self, request, queryset, view)</code>ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•˜ì„¸ìš”. ë©”ì„œë“œëŠ” í•„í„°ë§ ëœ ìƒˆ ì¿¼ë¦¬ì…‹ì„ ë°˜í™˜í•´ì•¼í•©ë‹ˆë‹¤.<br />
í´ë¼ì´ì–¸íŠ¸ê°€ ê²€ìƒ‰ ë° í•„í„°ë§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì„ë¿ë§Œ ì•„ë‹ˆë¼ generic filter ë°±ì—”ë“œëŠ” íŠ¹ì • ìš”ì²­ì´ë‚˜ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ì–´ì•¼ í•˜ëŠ” ê°ì²´ë¥¼ ì œí•œí•˜ëŠ”ë° ìœ ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="example">Example</h3>
<p>ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ ë§Œë“  ê°œì²´ë§Œ ë³¼ ìˆ˜ ìˆë„ë¡ ì‚¬ìš©ìë¥¼ ì œí•œí•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">IsOwnerFilterBackend</span><span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">BaseFilterBackend</span><span class="p">):</span>
    <span class="s">"""
    Filter that only allows users to see their own objects.
    """</span>
    <span class="k">def</span> <span class="nf">filter_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">queryset</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">request</span><span class="p">.</span><span class="n">user</span><span class="p">)</span>
</code></pre></div></div>
<p>viewì—ì„œ <code class="language-plaintext highlighter-rouge">get_queryset()</code>ì„ ì˜¤ë²„ë¼ì´ë“œí•˜ì—¬ ë™ì¼í•œ ë™ì‘ì„ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ filter ë°±ì—”ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì´ ì œí•œì„ ì—¬ëŸ¬ viewì— ë” ì‰½ê²Œ ì¶”ê°€í•˜ê±°ë‚˜ ì „ì²´ APIì— ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="customizing-the-interface">Customizing the interface</h3>
<p>generic filterëŠ” browsable APIì—ë„ ì¹œí„°í˜ì´ìŠ¤ë¥¼ ì œê³µ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë ¤ë©´ filterì˜ ë Œë”ë§ ëœ HTML í‘œí˜„ì„ ë°˜í™˜í•˜ëŠ” <code class="language-plaintext highlighter-rouge">to_html()</code>ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼í•©ë‹ˆë‹¤. ì´ ë©”ì„œë“œì˜ ì„œëª…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">to_html(self, request, queryset, view)</code></p>

<p>ë©”ì„œë“œëŠ” ë Œë”ë§ ëœ HTML ë¬¸ìì—´ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<h3 id="pagination--schemas">Pagination &amp; schemas</h3>
<p>REST í”„ë ˆì„ì›Œí¬ê°€ ì œê³µí•˜ëŠ” ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±ì—ì„œ filter ì»¨íŠ¸ë¡¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´, <code class="language-plaintext highlighter-rouge">get_schema_fields()</code>ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” <code class="language-plaintext highlighter-rouge">coreapi.Filed</code>ì¸ìŠ¤í„´ìŠ¤ì˜ listë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<h2 id="third-party-packages">Third party packages</h2>
<p>ë‹¤ìŒì˜ íƒ€ì‚¬ íŒ¨í‚¤ì§€ëŠ” ì¶”ê°€ í•„í„° êµ¬í˜„ì„ ì œê³µí•©ë‹ˆë‹¤.</p>

<h3 id="django-rest-framework">Django REST framework</h3>
<p><a href="https://github.com/philipn/django-rest-framework-filters"><code class="language-plaintext highlighter-rouge">django-rest-framework-filters</code></a> íŒ¨í‚¤ì§€ëŠ” <code class="language-plaintext highlighter-rouge">DjangoFilterBackend</code> í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì‘ë™í•˜ë©° ê´€ê³„ì— ëŒ€í•œ í•„í„°ë¥¼ ì‰½ê²Œ ë§Œë“¤ê±°ë‚˜ ì£¼ì–´ì§„ í•„ë“œì— ëŒ€í•´ ì—¬ëŸ¬ ê°œì˜ í•„í„° ì¡°íšŒ ìœ í˜•ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="django-rest-framework-full-word-search-filter">Django REST framework full word search filter</h3>
<p><a href="https://github.com/trollknurr/django-rest-framework-word-search-filter"><code class="language-plaintext highlighter-rouge">djangorestframework-word-filter</code></a>ëŠ” <code class="language-plaintext highlighter-rouge">filters.SearchFilter</code>ì˜ ëŒ€ì•ˆìœ¼ë¡œ ê°œë°œë˜ì—ˆìœ¼ë©° í…ìŠ¤íŠ¸ ë˜ëŠ” ì™„ì „ ì¼ì¹˜ì—ì„œ ì „ì²´ ë‹¨ì–´ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>

<h3 id="django-url-filter">Django URL Filter</h3>
<p><a href="https://github.com/miki725/django-url-filter"><code class="language-plaintext highlighter-rouge">django-url-filter</code></a>ëŠ” ì¹œì¸ê°„ì ì¸ URLì„ í†µí•´ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ëŠ” ì•ˆì „í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” DRF serializer ë° í•„ë“œì™€ ë§¤ìš° ìœ ì‚¬í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤. ì¦‰, filtersets ë° í•„í„°ë¼ê³  í•˜ëŠ” ê²ƒì„ ì œì™¸í•˜ê³ ëŠ” ì¤‘ì²© ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê´€ë ¨ ë°ì´í„°ë¥¼ ì‰½ê²Œ í•„í„°ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì¼ë°˜ì ì¸ ëª©ì ì´ë¯€ë¡œ Django <code class="language-plaintext highlighter-rouge">QuerySet</code>ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì†ŒìŠ¤ì˜ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="drf-url-filters">drf-url-filters</h3>
<p><a href="https://github.com/manjitkumar/drf-url-filters"><code class="language-plaintext highlighter-rouge">drf-url-filter</code></a>ëŠ” Drf <code class="language-plaintext highlighter-rouge">ModelViewSet</code>ì˜ <code class="language-plaintext highlighter-rouge">Queryset</code>ì— í•„í„°ë¥¼ ê°„ë‹¨í•˜ê³  êµ¬ì„± ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ ì ìš©í•˜ëŠ” ê°„ë‹¨í•œ Django ì‘ìš© í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. ë˜í•œ ë“¤ì–´ì˜¤ëŠ” ì¿¼ë¦¬ parameter ë° í•´ë‹¹ ê°’ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì•„ë¦„ë‹¤ìš´ python íŒ¨í‚¤ì§€ <code class="language-plaintext highlighter-rouge">Voluptuous</code>ëŠ” ë“¤ì–´ì˜¤ëŠ” ì¿¼ë¦¬ parameterì˜ ìœ íš¨ì„± ê²€ì‚¬ì— ì‚¬ìš©ë©ë‹ˆë‹¤. ê°€ì¥ ê´€ëŒ€í•œ ë¶€ë¶„ì€ ì¿¼ë¦¬ parameter ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ ìì²´ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
:ET