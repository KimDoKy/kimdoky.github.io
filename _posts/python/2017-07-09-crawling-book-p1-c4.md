---
layout: post
section-type: post
title: crawling - P1.스크레이퍼 제작 _ cahp 4. API 사용
category: python
tags: [ 'python' ]
---

대형 프로젝트를 다루다 보면 다른 사람들의 코드를 다루면서 고생을 하게 됩니다. 네임스페이스 문제, 타입 문제, 함수 반환 값에 대한 오해, A 지점에서 B 메서드로 정보를 전달하는 것 같은 단순한 문제조차 악몽처럼 복잡해 질 수 있습니다.  

그래서 애플리케이션 프로그래밍 인터페이스(API)가 필요한 것입니다. API는 본질에서 다른 여러 애플리케이션 사이에 간편한 인터페이스를 제공합니다. 애플리케이션을 어떤 프로그래머가 만들었든, 어떤 구조로 만들었든, 심지어 언어가 무엇인지도 상관없습니다. API는 서로 정보를 공유해야 하는 소프트웨어 사이에서 국제어 구실을 하도록 디자인 된 것입니다.  

소프트웨어 애플리케이션이 다양하므로 API 역시 다양하지만, 최근에 API라고 하면 보통 웹 애플리케이션 API로 이해합니다. API가 요청을 보낼 때는 HTTP를 통해 데이터를 요청하며 API는 이 데이터를 XML이나 JSON 형식으로 반환합니다. 대부분의 API가 아직 XML을 지원하지만 JSON을 인토딩 프로토콜로 선택라는 API도 빠르게 늘어나고 있습니다.  

API를 사용하는 건 웹 스크레이핑이 아니라고 생각할 수도 있지만, 거의 같은 테크닉(HTTP 요청 보내기)을 사용해 비슷한 결과(정보 얻기)를 추구합니다. 둘은 상호 보완적일 때가 많습니다.  

예를 들어 웹 스크레이퍼에서 얻은 정보와 API에서 얻은 정보를 결합해 더 유용한 것으로 바꿀 수도 있습니다. 후반부에서 위키백과 편집 내역(IP 주소가 들어 있는)과 IP 주소 해석기 API를 결합해 세계 곳곳에 있는 위키백과를 어떻게 편집하고 있는지 알아보는 프로그램을 만듭니다.  

chap4 에서는 API의 일반적인 개관과 함께 최근 널리 쓰이는 API에 대해 알아보고, 직접 만든 웹 스크레이퍼에서 어떻게 활용할 수 있는지 살펴봅니다.


## 4.1 API는 어떻게 동작하는가

API는 원래 의도만큼 사방에서 쓰이지는 않지만, 다양한 정보에 필요한 API가 존재합니다. 음악과 음악가, 앨범, 음악 스타일과 관련된 정보를 얻을 수 있는 API도 있고, ESPN에서 선수 정보, 게임 정보, 점수 등 여러정보들에 관한 API를 제공합니다. 구글 개발자 섹션(https://console.developers.google.com)에는 언어 번역과 분석, 지오로케이션 등 수십 가지 API가 있습니다.  

API는 사용하기 매우 쉽습니다. 브라우저에 다음을 입력하는 것만으로 간단한 API 요청을 해볼 수 있습니다.

```
http://freegeoip.net/json/50.78.253.58
# 이 API는 IP 주소를 지리적 위치로 변환하는 API입니다.
```
다음과 같은 응답을 얻습니다.

```
{"ip":"50.78.253.58","country_code":"US","country_name":"United States","region_code":"MA","region_name":"Massachusetts","city":"Boston","zip_code":"02116","time_zone":"America/New_York","latitude":42.3496,"longitude":-71.0746,"metro_code":506}
```

API는 HTTP를 통해 동작합니다. 웹사이트에서 데이터를 가져오고, 파일을 내려받고, 기타 인터넷에서 하는 거의 모든 일과 똑같은 프로토콜입니다. API가 일반 웹사이트와 다른 점은 완전히 정형화된 문법을 사용한다는 점, HTML이 아니라 JSON이나 XML로 데이터를 보낸다는 점뿐입니다.

## 4.2 공통 표기법

### 4.2.1 메서드

### 4.2.2 인증

## 4.3 응답

### 4.3.1 API 호출

## 4.4 에코 네스트

### 4.4.1 몇 가지 예제

## 4.5 트위터

### 4.5.1 시작하기

### 4.5.2 몇 가지 예제

## 4.6 구글 API

### 4.6.1 시작하기

### 4.6.2 몇 가지 예제

## 4.7 JSON 파싱

## 4.8 모든 것을 하나로

## 4.9 마치며
